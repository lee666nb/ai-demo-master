<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/java/com/fox/alibabadeepseekdemo/controller/ChatController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/java/com/fox/alibabadeepseekdemo/controller/ChatController.java" />
              <option name="originalContent" value="package com.fox.alibabadeepseekdemo.controller;&#10;&#10;import org.springframework.ai.chat.client.ChatClient;&#10;import org.springframework.http.HttpHeaders;&#10;import org.springframework.http.MediaType;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.http.server.ServerHttpResponse;&#10;import org.springframework.web.bind.annotation.*;&#10;import org.springframework.web.servlet.mvc.method.annotation.SseEmitter;&#10;import reactor.core.publisher.Flux;&#10;&#10;import java.io.IOException;&#10;import java.nio.charset.StandardCharsets;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/ai&quot;)&#10;@CrossOrigin(origins = &quot;*&quot;) // 添加跨域支持&#10;public class ChatController {&#10;    private final ChatClient chatClient;&#10; &#10;    public ChatController(ChatClient.Builder chatClient) {&#10;        this.chatClient = chatClient.build();&#10;    }&#10;&#10;    @GetMapping(value = &quot;/chat&quot;)&#10;    public ResponseEntity&lt;String&gt; chat(@RequestParam(value = &quot;input&quot;) String input) {&#10;        try {&#10;            if (input == null || input.trim().isEmpty()) {&#10;                return ResponseEntity.badRequest().body(&quot;输入不能为空&quot;);&#10;            }&#10;&#10;            String response = this.chatClient.prompt()&#10;                    .user(input)&#10;                    .call()&#10;                    .content();&#10;&#10;            return ResponseEntity.ok(response);&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            return ResponseEntity.internalServerError()&#10;                    .body(&quot;AI服务暂时不可用，请稍后重试。错误信息：&quot; + e.getMessage());&#10;        }&#10;    }&#10;&#10;    @GetMapping(value = &quot;/stream&quot;, produces = &quot;text/plain;charset=UTF-8&quot;)&#10;    public Flux&lt;String&gt; stream(@RequestParam(value = &quot;input&quot;) String input) {&#10;        try {&#10;            if (input == null || input.trim().isEmpty()) {&#10;                return Flux.just(&quot;输入不能为空&quot;);&#10;            }&#10;&#10;            return this.chatClient.prompt()&#10;                    .user(input)&#10;                    .stream()&#10;                    .content()&#10;                    .onErrorReturn(&quot;AI服务出现错误，请稍后重试&quot;);&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            return Flux.just(&quot;AI服务暂时不可用：&quot; + e.getMessage());&#10;        }&#10;    }&#10;&#10;    @GetMapping(value = &quot;/sseChat&quot;)&#10;    public SseEmitter sseChat(@RequestParam(value = &quot;input&quot;, defaultValue = &quot;你是谁&quot;) String input) {&#10;        SseEmitter sseEmitter = new SseEmitter(30000L) { // 设置30秒超时&#10;            @Override&#10;            protected void extendResponse(ServerHttpResponse outputMessage) {&#10;                HttpHeaders headers = outputMessage.getHeaders();&#10;                headers.setContentType(new MediaType(&quot;text&quot;, &quot;event-stream&quot;, StandardCharsets.UTF_8));&#10;                headers.set(&quot;Cache-Control&quot;, &quot;no-cache&quot;);&#10;                headers.set(&quot;Connection&quot;, &quot;keep-alive&quot;);&#10;            }&#10;        };&#10;&#10;        try {&#10;            if (input == null || input.trim().isEmpty()) {&#10;                sseEmitter.send(&quot;输入不能为空&quot;);&#10;                sseEmitter.complete();&#10;                return sseEmitter;&#10;            }&#10;&#10;            Flux&lt;String&gt; stream = chatClient&#10;                    .prompt()&#10;                    .user(input)&#10;                    .stream()&#10;                    .content();&#10;&#10;            stream.subscribe(&#10;                token -&gt; {&#10;                    try {&#10;                        sseEmitter.send(token);&#10;                    } catch (IOException e) {&#10;                        sseEmitter.completeWithError(e);&#10;                    }&#10;                },&#10;                error -&gt; {&#10;                    try {&#10;                        sseEmitter.send(&quot;AI服务出现错误：&quot; + error.getMessage());&#10;                    } catch (IOException e) {&#10;                        // 忽略发送错误&#10;                    }&#10;                    sseEmitter.completeWithError(error);&#10;                },&#10;                sseEmitter::complete&#10;            );&#10;        } catch (Exception e) {&#10;            try {&#10;                sseEmitter.send(&quot;AI服务暂时不可用：&quot; + e.getMessage());&#10;            } catch (IOException ioException) {&#10;                // 忽略发送错误&#10;            }&#10;            sseEmitter.completeWithError(e);&#10;        }&#10;&#10;        return sseEmitter;&#10;    }&#10;&#10;    // 添加健康检查接口&#10;    @GetMapping(&quot;/health&quot;)&#10;    public ResponseEntity&lt;String&gt; health() {&#10;        try {&#10;            // 发送一个简单的测试请求&#10;            String testResponse = this.chatClient.prompt()&#10;                    .user(&quot;hello&quot;)&#10;                    .call()&#10;                    .content();&#10;            return ResponseEntity.ok(&quot;AI服务正常运行&quot;);&#10;        } catch (Exception e) {&#10;            return ResponseEntity.internalServerError()&#10;                    .body(&quot;AI服务异常：&quot; + e.getMessage());&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package com.fox.alibabadeepseekdemo.controller;&#10;&#10;import org.springframework.ai.chat.client.ChatClient;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.web.bind.annotation.*;&#10;&#10;import java.util.*;&#10;import java.util.concurrent.ConcurrentHashMap;&#10;&#10;@RestController&#10;@RequestMapping(&quot;/api&quot;)&#10;@CrossOrigin(origins = &quot;*&quot;)&#10;public class ChatController {&#10;    private final ChatClient chatClient;&#10;    &#10;    // 存储聊天会话&#10;    private final Map&lt;String, ChatSession&gt; chatSessions = new ConcurrentHashMap&lt;&gt;();&#10;    private final Map&lt;String, List&lt;String&gt;&gt; userChats = new ConcurrentHashMap&lt;&gt;();&#10;&#10;    public ChatController(ChatClient.Builder chatClient) {&#10;        this.chatClient = chatClient.build();&#10;    }&#10;&#10;    @PostMapping(&quot;/chat&quot;)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; chat(@RequestBody ChatRequest request) {&#10;        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();&#10;        &#10;        try {&#10;            if (request.getMessage() == null || request.getMessage().trim().isEmpty()) {&#10;                response.put(&quot;success&quot;, false);&#10;                response.put(&quot;message&quot;, &quot;消息不能为空&quot;);&#10;                return ResponseEntity.badRequest().body(response);&#10;            }&#10;&#10;            String chatId = request.getChatId();&#10;            if (chatId == null) {&#10;                chatId = generateChatId();&#10;            }&#10;&#10;            // 获取或创建聊天会话&#10;            ChatSession session = chatSessions.computeIfAbsent(chatId, k -&gt; new ChatSession(k));&#10;            &#10;            // 添加用户消息到历史&#10;            session.addMessage(&quot;user&quot;, request.getMessage());&#10;&#10;            // 构建对话上下文&#10;            StringBuilder contextBuilder = new StringBuilder();&#10;            for (ChatMessage msg : session.getMessages()) {&#10;                contextBuilder.append(msg.getRole()).append(&quot;: &quot;).append(msg.getContent()).append(&quot;\n&quot;);&#10;            }&#10;&#10;            // 调用AI服务&#10;            String aiResponse = this.chatClient.prompt()&#10;                    .user(request.getMessage())&#10;                    .call()&#10;                    .content();&#10;&#10;            // 添加AI回复到历史&#10;            session.addMessage(&quot;assistant&quot;, aiResponse);&#10;            session.setLastActiveTime(System.currentTimeMillis());&#10;            session.setTitle(generateChatTitle(request.getMessage()));&#10;&#10;            // 更新用户的聊天列表&#10;            String username = request.getUsername();&#10;            if (username != null) {&#10;                userChats.computeIfAbsent(username, k -&gt; new ArrayList&lt;&gt;());&#10;                if (!userChats.get(username).contains(chatId)) {&#10;                    userChats.get(username).add(0, chatId); // 添加到开头&#10;                }&#10;            }&#10;&#10;            response.put(&quot;success&quot;, true);&#10;            response.put(&quot;reply&quot;, aiResponse);&#10;            response.put(&quot;chatId&quot;, chatId);&#10;            response.put(&quot;timestamp&quot;, System.currentTimeMillis());&#10;&#10;            return ResponseEntity.ok(response);&#10;&#10;        } catch (Exception e) {&#10;            e.printStackTrace();&#10;            response.put(&quot;success&quot;, false);&#10;            response.put(&quot;message&quot;, &quot;AI服务暂时不可用，请稍后重试&quot;);&#10;            return ResponseEntity.internalServerError().body(response);&#10;        }&#10;    }&#10;&#10;    @GetMapping(&quot;/chats/{username}&quot;)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; getUserChats(@PathVariable String username) {&#10;        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();&#10;        &#10;        try {&#10;            List&lt;String&gt; chatIds = userChats.getOrDefault(username, new ArrayList&lt;&gt;());&#10;            List&lt;Map&lt;String, Object&gt;&gt; chats = new ArrayList&lt;&gt;();&#10;&#10;            for (String chatId : chatIds) {&#10;                ChatSession session = chatSessions.get(chatId);&#10;                if (session != null) {&#10;                    Map&lt;String, Object&gt; chatInfo = new HashMap&lt;&gt;();&#10;                    chatInfo.put(&quot;id&quot;, chatId);&#10;                    chatInfo.put(&quot;title&quot;, session.getTitle());&#10;                    chatInfo.put(&quot;lastActiveTime&quot;, session.getLastActiveTime());&#10;                    chatInfo.put(&quot;messageCount&quot;, session.getMessages().size());&#10;                    chats.add(chatInfo);&#10;                }&#10;            }&#10;&#10;            response.put(&quot;success&quot;, true);&#10;            response.put(&quot;chats&quot;, chats);&#10;            return ResponseEntity.ok(response);&#10;&#10;        } catch (Exception e) {&#10;            response.put(&quot;success&quot;, false);&#10;            response.put(&quot;message&quot;, &quot;获取聊天记录失败&quot;);&#10;            return ResponseEntity.internalServerError().body(response);&#10;        }&#10;    }&#10;&#10;    @GetMapping(&quot;/chat/{chatId}&quot;)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; getChatHistory(@PathVariable String chatId) {&#10;        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();&#10;        &#10;        try {&#10;            ChatSession session = chatSessions.get(chatId);&#10;            if (session == null) {&#10;                response.put(&quot;success&quot;, false);&#10;                response.put(&quot;message&quot;, &quot;聊天记录不存在&quot;);&#10;                return ResponseEntity.notFound().build();&#10;            }&#10;&#10;            response.put(&quot;success&quot;, true);&#10;            response.put(&quot;chatId&quot;, chatId);&#10;            response.put(&quot;title&quot;, session.getTitle());&#10;            response.put(&quot;messages&quot;, session.getMessages());&#10;            return ResponseEntity.ok(response);&#10;&#10;        } catch (Exception e) {&#10;            response.put(&quot;success&quot;, false);&#10;            response.put(&quot;message&quot;, &quot;获取聊天记录失败&quot;);&#10;            return ResponseEntity.internalServerError().body(response);&#10;        }&#10;    }&#10;&#10;    @DeleteMapping(&quot;/chat/{chatId}&quot;)&#10;    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; deleteChat(@PathVariable String chatId, @RequestParam String username) {&#10;        Map&lt;String, Object&gt; response = new HashMap&lt;&gt;();&#10;        &#10;        try {&#10;            chatSessions.remove(chatId);&#10;            List&lt;String&gt; userChatList = userChats.get(username);&#10;            if (userChatList != null) {&#10;                userChatList.remove(chatId);&#10;            }&#10;&#10;            response.put(&quot;success&quot;, true);&#10;            response.put(&quot;message&quot;, &quot;聊天记录已删除&quot;);&#10;            return ResponseEntity.ok(response);&#10;&#10;        } catch (Exception e) {&#10;            response.put(&quot;success&quot;, false);&#10;            response.put(&quot;message&quot;, &quot;删除聊天记录失败&quot;);&#10;            return ResponseEntity.internalServerError().body(response);&#10;        }&#10;    }&#10;&#10;    private String generateChatId() {&#10;        return &quot;chat_&quot; + System.currentTimeMillis() + &quot;_&quot; + UUID.randomUUID().toString().substring(0, 8);&#10;    }&#10;&#10;    private String generateChatTitle(String firstMessage) {&#10;        if (firstMessage.length() &gt; 20) {&#10;            return firstMessage.substring(0, 20) + &quot;...&quot;;&#10;        }&#10;        return firstMessage;&#10;    }&#10;&#10;    // 内部类&#10;    public static class ChatRequest {&#10;        private String message;&#10;        private String chatId;&#10;        private String username;&#10;&#10;        // Getters and Setters&#10;        public String getMessage() { return message; }&#10;        public void setMessage(String message) { this.message = message; }&#10;        &#10;        public String getChatId() { return chatId; }&#10;        public void setChatId(String chatId) { this.chatId = chatId; }&#10;        &#10;        public String getUsername() { return username; }&#10;        public void setUsername(String username) { this.username = username; }&#10;    }&#10;&#10;    public static class ChatSession {&#10;        private String id;&#10;        private String title;&#10;        private List&lt;ChatMessage&gt; messages;&#10;        private long lastActiveTime;&#10;        private long createdTime;&#10;&#10;        public ChatSession(String id) {&#10;            this.id = id;&#10;            this.title = &quot;新对话&quot;;&#10;            this.messages = new ArrayList&lt;&gt;();&#10;            this.createdTime = System.currentTimeMillis();&#10;            this.lastActiveTime = System.currentTimeMillis();&#10;        }&#10;&#10;        public void addMessage(String role, String content) {&#10;            messages.add(new ChatMessage(role, content, System.currentTimeMillis()));&#10;        }&#10;&#10;        // Getters and Setters&#10;        public String getId() { return id; }&#10;        public String getTitle() { return title; }&#10;        public void setTitle(String title) { this.title = title; }&#10;        public List&lt;ChatMessage&gt; getMessages() { return messages; }&#10;        public long getLastActiveTime() { return lastActiveTime; }&#10;        public void setLastActiveTime(long lastActiveTime) { this.lastActiveTime = lastActiveTime; }&#10;        public long getCreatedTime() { return createdTime; }&#10;    }&#10;&#10;    public static class ChatMessage {&#10;        private String role;&#10;        private String content;&#10;        private long timestamp;&#10;&#10;        public ChatMessage(String role, String content, long timestamp) {&#10;            this.role = role;&#10;            this.content = content;&#10;            this.timestamp = timestamp;&#10;        }&#10;&#10;        // Getters and Setters&#10;        public String getRole() { return role; }&#10;        public String getContent() { return content; }&#10;        public long getTimestamp() { return timestamp; }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/java/com/fox/alibabadeepseekdemo/controller/PageController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/java/com/fox/alibabadeepseekdemo/controller/PageController.java" />
              <option name="originalContent" value="package com.fox.alibabadeepseekdemo.controller;&#10;&#10;import org.springframework.stereotype.Controller;&#10;import org.springframework.web.bind.annotation.GetMapping;&#10;&#10;@Controller&#10;public class PageController {&#10;&#10;    @GetMapping(&quot;/&quot;)&#10;    public String index() {&#10;        return &quot;redirect:/login&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/login&quot;)&#10;    public String loginPage() {&#10;        return &quot;forward:/login.html&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/register&quot;)&#10;    public String registerPage() {&#10;        return &quot;forward:/register.html&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/chat&quot;)&#10;    public String chatPage() {&#10;        return &quot;forward:/chat.html&quot;;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.fox.alibabadeepseekdemo.controller;&#10;&#10;import org.springframework.stereotype.Controller;&#10;import org.springframework.web.bind.annotation.GetMapping;&#10;&#10;@Controller&#10;public class PageController {&#10;&#10;    @GetMapping(&quot;/&quot;)&#10;    public String index() {&#10;        return &quot;redirect:/login&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/login&quot;)&#10;    public String loginPage() {&#10;        return &quot;redirect:/login.html&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/register&quot;)&#10;    public String registerPage() {&#10;        return &quot;redirect:/register.html&quot;;&#10;    }&#10;&#10;    @GetMapping(&quot;/chat&quot;)&#10;    public String chatPage() {&#10;        return &quot;redirect:/chat.html&quot;;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/chat.html">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/chat.html" />
              <option name="originalContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh-CN&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;AI聊天室&lt;/title&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/chat.css&quot;&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css&quot;&gt;&#10;    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot;&gt;&#10;    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin&gt;&#10;    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;chat-container&quot;&gt;&#10;        &lt;!-- 侧边栏 --&gt;&#10;        &lt;div class=&quot;sidebar&quot;&gt;&#10;            &lt;div class=&quot;sidebar-header&quot;&gt;&#10;                &lt;div class=&quot;brand-logo&quot;&gt;&#10;                    &lt;div class=&quot;logo-icon&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-brain&quot;&gt;&lt;/i&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;span class=&quot;brand-text&quot;&gt;AI聊天室&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;button class=&quot;new-chat-btn&quot; onclick=&quot;newChat()&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-plus&quot;&gt;&lt;/i&gt;&#10;                    新对话&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;chat-history&quot;&gt;&#10;                &lt;div class=&quot;history-list&quot; id=&quot;chatHistoryList&quot;&gt;&#10;                    &lt;!-- 聊天历史将动态加载 --&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;sidebar-footer&quot;&gt;&#10;                &lt;div class=&quot;user-info&quot; id=&quot;userInfo&quot;&gt;&#10;                    &lt;div class=&quot;user-avatar&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-user&quot;&gt;&lt;/i&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;user-details&quot;&gt;&#10;                        &lt;span class=&quot;username&quot; id=&quot;displayUsername&quot;&gt;用户&lt;/span&gt;&#10;                        &lt;span class=&quot;user-email&quot; id=&quot;displayEmail&quot;&gt;user@example.com&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;button class=&quot;logout-btn&quot; onclick=&quot;logout()&quot; title=&quot;退出登录&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-sign-out-alt&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- 主聊天区域 --&gt;&#10;        &lt;div class=&quot;main-content&quot;&gt;&#10;            &lt;div class=&quot;chat-header&quot;&gt;&#10;                &lt;div class=&quot;chat-title&quot;&gt;&#10;                    &lt;h2 id=&quot;chatTitle&quot;&gt;AI助手&lt;/h2&gt;&#10;                    &lt;span class=&quot;chat-status&quot;&gt;在线&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;chat-actions&quot;&gt;&#10;                    &lt;button class=&quot;action-btn&quot; onclick=&quot;clearChat()&quot; title=&quot;清除对话&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-broom&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                    &lt;button class=&quot;action-btn&quot; onclick=&quot;exportChat()&quot; title=&quot;导出对话&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-download&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;chat-messages&quot; id=&quot;chatMessages&quot;&gt;&#10;                &lt;div class=&quot;welcome-message&quot;&gt;&#10;                    &lt;div class=&quot;welcome-icon&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-robot&quot;&gt;&lt;/i&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;h3&gt;欢迎使用AI聊天室&lt;/h3&gt;&#10;                    &lt;p&gt;我是您的AI助手，有什么可以帮助您的吗？&lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;chat-input-area&quot;&gt;&#10;                &lt;div class=&quot;input-container&quot;&gt;&#10;                    &lt;div class=&quot;input-wrapper&quot;&gt;&#10;                        &lt;textarea&#10;                            id=&quot;messageInput&quot;&#10;                            placeholder=&quot;输入您的消息...&quot;&#10;                            rows=&quot;1&quot;&#10;                            maxlength=&quot;2000&quot;&gt;&lt;/textarea&gt;&#10;                        &lt;div class=&quot;input-actions&quot;&gt;&#10;                            &lt;button class=&quot;action-btn&quot; onclick=&quot;attachFile()&quot; title=&quot;附件&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-paperclip&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                            &lt;button class=&quot;send-btn&quot; onclick=&quot;sendMessage()&quot; title=&quot;发送 (Ctrl+Enter)&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-paper-plane&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;input-footer&quot;&gt;&#10;                        &lt;span class=&quot;char-count&quot;&gt;0/2000&lt;/span&gt;&#10;                        &lt;span class=&quot;input-hint&quot;&gt;按 Ctrl+Enter 发送&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script src=&quot;js/chat.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;&#10;" />
              <option name="updatedContent" value="&lt;!DOCTYPE html&gt;&#10;&lt;html lang=&quot;zh-CN&quot;&gt;&#10;&lt;head&gt;&#10;    &lt;meta charset=&quot;UTF-8&quot;&gt;&#10;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;&#10;    &lt;title&gt;AI聊天室 - 智能对话平台&lt;/title&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/chat.css&quot;&gt;&#10;    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css&quot;&gt;&#10;    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot;&gt;&#10;    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin&gt;&#10;    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;&#10;&lt;/head&gt;&#10;&lt;body&gt;&#10;    &lt;div class=&quot;chat-container&quot;&gt;&#10;        &lt;!-- 侧边栏 --&gt;&#10;        &lt;div class=&quot;sidebar&quot; id=&quot;sidebar&quot;&gt;&#10;            &lt;div class=&quot;sidebar-header&quot;&gt;&#10;                &lt;div class=&quot;brand-logo&quot;&gt;&#10;                    &lt;div class=&quot;logo-icon&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-brain&quot;&gt;&lt;/i&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;span class=&quot;brand-text&quot;&gt;AI聊天室&lt;/span&gt;&#10;                &lt;/div&gt;&#10;                &lt;button class=&quot;new-chat-btn&quot; onclick=&quot;newChat()&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-plus&quot;&gt;&lt;/i&gt;&#10;                    &lt;span&gt;新对话&lt;/span&gt;&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &#10;            &lt;div class=&quot;chat-history&quot;&gt;&#10;                &lt;div class=&quot;history-header&quot;&gt;&#10;                    &lt;h3&gt;最近对话&lt;/h3&gt;&#10;                    &lt;button class=&quot;history-search-btn&quot; onclick=&quot;toggleSearch()&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-search&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;search-container&quot; id=&quot;searchContainer&quot;&gt;&#10;                    &lt;input type=&quot;text&quot; id=&quot;searchInput&quot; placeholder=&quot;搜索对话...&quot; class=&quot;search-input&quot;&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;history-list&quot; id=&quot;chatHistoryList&quot;&gt;&#10;                    &lt;div class=&quot;history-placeholder&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-comments&quot;&gt;&lt;/i&gt;&#10;                        &lt;p&gt;暂无对话记录&lt;/p&gt;&#10;                        &lt;span&gt;开始您的第一次AI对话&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;            &#10;            &lt;div class=&quot;sidebar-footer&quot;&gt;&#10;                &lt;div class=&quot;user-info&quot; id=&quot;userInfo&quot;&gt;&#10;                    &lt;div class=&quot;user-avatar&quot; onclick=&quot;openProfileModal()&quot;&gt;&#10;                        &lt;img id=&quot;userAvatarImg&quot; src=&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiM2NjdlZWEiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZmZmZiI+CjxwYXRoIGQ9Ik0xMiAxMmMyLjIxIDAgNC0xLjc5IDQtNHMtMS43OS00LTQtNC00IDEuNzktNCA0IDEuNzkgNCA0IDR6bTAgMmMtMi42NyAwLTggMS4zNC04IDR2MmgxNnYtMmMwLTIuNjYtNS4zMy00LTgtNHoiLz4KPHN2Zz4KPC9zdmc+&quot; alt=&quot;用户头像&quot; class=&quot;avatar-img&quot;&gt;&#10;                        &lt;div class=&quot;avatar-status online&quot;&gt;&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;user-details&quot;&gt;&#10;                        &lt;span class=&quot;username&quot; id=&quot;displayUsername&quot;&gt;用户&lt;/span&gt;&#10;                        &lt;span class=&quot;user-status&quot;&gt;在线&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;user-actions&quot;&gt;&#10;                        &lt;button class=&quot;user-action-btn&quot; onclick=&quot;openSettingsModal()&quot; title=&quot;设置&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-cog&quot;&gt;&lt;/i&gt;&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;user-action-btn&quot; onclick=&quot;logout()&quot; title=&quot;退出登录&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-sign-out-alt&quot;&gt;&lt;/i&gt;&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- 主聊天区域 --&gt;&#10;        &lt;div class=&quot;main-content&quot;&gt;&#10;            &lt;div class=&quot;chat-header&quot;&gt;&#10;                &lt;div class=&quot;header-left&quot;&gt;&#10;                    &lt;button class=&quot;sidebar-toggle&quot; onclick=&quot;toggleSidebar()&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-bars&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                    &lt;div class=&quot;chat-title&quot;&gt;&#10;                        &lt;h2 id=&quot;chatTitle&quot;&gt;AI助手&lt;/h2&gt;&#10;                        &lt;span class=&quot;chat-status&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-circle&quot;&gt;&lt;/i&gt;&#10;                            在线&#10;                        &lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;chat-actions&quot;&gt;&#10;                    &lt;button class=&quot;action-btn&quot; onclick=&quot;toggleChatInfo()&quot; title=&quot;对话信息&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-info-circle&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                    &lt;button class=&quot;action-btn&quot; onclick=&quot;clearCurrentChat()&quot; title=&quot;清除对话&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-broom&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                    &lt;button class=&quot;action-btn&quot; onclick=&quot;exportChat()&quot; title=&quot;导出对话&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-download&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;chat-messages&quot; id=&quot;chatMessages&quot;&gt;&#10;                &lt;div class=&quot;welcome-section&quot;&gt;&#10;                    &lt;div class=&quot;welcome-avatar&quot;&gt;&#10;                        &lt;div class=&quot;ai-avatar&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-robot&quot;&gt;&lt;/i&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;welcome-content&quot;&gt;&#10;                        &lt;h3&gt;欢迎使用AI聊天室&lt;/h3&gt;&#10;                        &lt;p&gt;我是您的AI智能助手，基于先进的大语言模型&lt;/p&gt;&#10;                        &lt;div class=&quot;quick-actions&quot;&gt;&#10;                            &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('你好，请介绍一下自己')&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-hand-wave&quot;&gt;&lt;/i&gt;&#10;                                &lt;span&gt;打个招呼&lt;/span&gt;&#10;                            &lt;/button&gt;&#10;                            &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('今天天气怎么样？')&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-cloud-sun&quot;&gt;&lt;/i&gt;&#10;                                &lt;span&gt;天气查询&lt;/span&gt;&#10;                            &lt;/button&gt;&#10;                            &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('帮我写一首诗')&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-feather&quot;&gt;&lt;/i&gt;&#10;                                &lt;span&gt;创意写作&lt;/span&gt;&#10;                            &lt;/button&gt;&#10;                            &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('解释一下人工智能')&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-lightbulb&quot;&gt;&lt;/i&gt;&#10;                                &lt;span&gt;知识问答&lt;/span&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            &lt;div class=&quot;chat-input-area&quot;&gt;&#10;                &lt;div class=&quot;input-container&quot;&gt;&#10;                    &lt;div class=&quot;input-wrapper&quot;&gt;&#10;                        &lt;div class=&quot;input-actions-left&quot;&gt;&#10;                            &lt;button class=&quot;action-btn&quot; onclick=&quot;attachFile()&quot; title=&quot;附件&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-paperclip&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                            &lt;button class=&quot;action-btn&quot; onclick=&quot;insertEmoji()&quot; title=&quot;表情&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-smile&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;textarea &#10;                            id=&quot;messageInput&quot; &#10;                            placeholder=&quot;输入您的消息... (Ctrl+Enter发送)&quot; &#10;                            rows=&quot;1&quot;&#10;                            maxlength=&quot;2000&quot;&gt;&lt;/textarea&gt;&#10;                        &lt;div class=&quot;input-actions-right&quot;&gt;&#10;                            &lt;button class=&quot;action-btn voice-btn&quot; onclick=&quot;toggleVoiceInput()&quot; title=&quot;语音输入&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-microphone&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                            &lt;button class=&quot;send-btn&quot; onclick=&quot;sendMessage()&quot; title=&quot;发送消息&quot;&gt;&#10;                                &lt;i class=&quot;fas fa-paper-plane&quot;&gt;&lt;/i&gt;&#10;                            &lt;/button&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;input-footer&quot;&gt;&#10;                        &lt;span class=&quot;char-count&quot;&gt;0/2000&lt;/span&gt;&#10;                        &lt;div class=&quot;input-hints&quot;&gt;&#10;                            &lt;span class=&quot;hint&quot;&gt;AI可能会产生错误信息&lt;/span&gt;&#10;                            &lt;span class=&quot;divider&quot;&gt;•&lt;/span&gt;&#10;                            &lt;span class=&quot;hint&quot;&gt;请注意核实重要信息&lt;/span&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;!-- 聊天信息面板 --&gt;&#10;        &lt;div class=&quot;chat-info-panel&quot; id=&quot;chatInfoPanel&quot;&gt;&#10;            &lt;div class=&quot;panel-header&quot;&gt;&#10;                &lt;h3&gt;对话信息&lt;/h3&gt;&#10;                &lt;button class=&quot;close-btn&quot; onclick=&quot;toggleChatInfo()&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-times&quot;&gt;&lt;/i&gt;&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;panel-content&quot;&gt;&#10;                &lt;div class=&quot;info-section&quot;&gt;&#10;                    &lt;h4&gt;当前对话&lt;/h4&gt;&#10;                    &lt;div class=&quot;info-item&quot;&gt;&#10;                        &lt;span class=&quot;label&quot;&gt;标题:&lt;/span&gt;&#10;                        &lt;span class=&quot;value&quot; id=&quot;currentChatTitle&quot;&gt;新对话&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;info-item&quot;&gt;&#10;                        &lt;span class=&quot;label&quot;&gt;消息数:&lt;/span&gt;&#10;                        &lt;span class=&quot;value&quot; id=&quot;messageCount&quot;&gt;0&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;info-item&quot;&gt;&#10;                        &lt;span class=&quot;label&quot;&gt;创建时间:&lt;/span&gt;&#10;                        &lt;span class=&quot;value&quot; id=&quot;chatCreateTime&quot;&gt;-&lt;/span&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;info-section&quot;&gt;&#10;                    &lt;h4&gt;AI模型&lt;/h4&gt;&#10;                    &lt;div class=&quot;model-info&quot;&gt;&#10;                        &lt;div class=&quot;model-name&quot;&gt;Qwen2.5-72B&lt;/div&gt;&#10;                        &lt;div class=&quot;model-provider&quot;&gt;硅基流动&lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 个人资料模态框 --&gt;&#10;    &lt;div class=&quot;modal-overlay&quot; id=&quot;profileModalOverlay&quot;&gt;&#10;        &lt;div class=&quot;modal profile-modal&quot;&gt;&#10;            &lt;div class=&quot;modal-header&quot;&gt;&#10;                &lt;h3&gt;个人资料&lt;/h3&gt;&#10;                &lt;button class=&quot;close-btn&quot; onclick=&quot;closeProfileModal()&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-times&quot;&gt;&lt;/i&gt;&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;modal-content&quot;&gt;&#10;                &lt;div class=&quot;avatar-section&quot;&gt;&#10;                    &lt;div class=&quot;avatar-preview&quot;&gt;&#10;                        &lt;img id=&quot;avatarPreview&quot; src=&quot;&quot; alt=&quot;头像预览&quot; class=&quot;avatar-img&quot;&gt;&#10;                        &lt;button class=&quot;avatar-change-btn&quot; onclick=&quot;changeAvatar()&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-camera&quot;&gt;&lt;/i&gt;&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;input type=&quot;file&quot; id=&quot;avatarInput&quot; accept=&quot;image/*&quot; style=&quot;display: none;&quot;&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;profile-form&quot;&gt;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label&gt;用户名&lt;/label&gt;&#10;                        &lt;input type=&quot;text&quot; id=&quot;profileUsername&quot; placeholder=&quot;输入用户名&quot; readonly&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label&gt;邮箱&lt;/label&gt;&#10;                        &lt;input type=&quot;email&quot; id=&quot;profileEmail&quot; placeholder=&quot;输入邮箱&quot; readonly&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label&gt;昵称&lt;/label&gt;&#10;                        &lt;input type=&quot;text&quot; id=&quot;profileNickname&quot; placeholder=&quot;输入昵称&quot;&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;form-group&quot;&gt;&#10;                        &lt;label&gt;个人简介&lt;/label&gt;&#10;                        &lt;textarea id=&quot;profileBio&quot; placeholder=&quot;介绍一下自己...&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-actions&quot;&gt;&#10;                    &lt;button class=&quot;btn secondary&quot; onclick=&quot;closeProfileModal()&quot;&gt;取消&lt;/button&gt;&#10;                    &lt;button class=&quot;btn primary&quot; onclick=&quot;saveProfile()&quot;&gt;保存&lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;!-- 设置模态框 --&gt;&#10;    &lt;div class=&quot;modal-overlay&quot; id=&quot;settingsModalOverlay&quot;&gt;&#10;        &lt;div class=&quot;modal settings-modal&quot;&gt;&#10;            &lt;div class=&quot;modal-header&quot;&gt;&#10;                &lt;h3&gt;设置&lt;/h3&gt;&#10;                &lt;button class=&quot;close-btn&quot; onclick=&quot;closeSettingsModal()&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-times&quot;&gt;&lt;/i&gt;&#10;                &lt;/button&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;modal-content&quot;&gt;&#10;                &lt;div class=&quot;settings-tabs&quot;&gt;&#10;                    &lt;button class=&quot;tab-btn active&quot; onclick=&quot;switchTab('general')&quot;&gt;通用&lt;/button&gt;&#10;                    &lt;button class=&quot;tab-btn&quot; onclick=&quot;switchTab('appearance')&quot;&gt;外观&lt;/button&gt;&#10;                    &lt;button class=&quot;tab-btn&quot; onclick=&quot;switchTab('ai')&quot;&gt;AI设置&lt;/button&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;settings-content&quot;&gt;&#10;                    &lt;div class=&quot;tab-content active&quot; id=&quot;generalTab&quot;&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;自动保存对话&lt;/label&gt;&#10;                            &lt;div class=&quot;switch&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;autoSave&quot; checked&gt;&#10;                                &lt;span class=&quot;slider&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;发送快捷键&lt;/label&gt;&#10;                            &lt;select id=&quot;shortcutKey&quot;&gt;&#10;                                &lt;option value=&quot;ctrl+enter&quot;&gt;Ctrl + Enter&lt;/option&gt;&#10;                                &lt;option value=&quot;enter&quot;&gt;Enter&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;消息时间显示&lt;/label&gt;&#10;                            &lt;div class=&quot;switch&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;showTime&quot; checked&gt;&#10;                                &lt;span class=&quot;slider&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;tab-content&quot; id=&quot;appearanceTab&quot;&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;主题模式&lt;/label&gt;&#10;                            &lt;select id=&quot;themeMode&quot;&gt;&#10;                                &lt;option value=&quot;dark&quot;&gt;深色模式&lt;/option&gt;&#10;                                &lt;option value=&quot;light&quot;&gt;浅色模式&lt;/option&gt;&#10;                                &lt;option value=&quot;auto&quot;&gt;跟随系统&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;字体大小&lt;/label&gt;&#10;                            &lt;select id=&quot;fontSize&quot;&gt;&#10;                                &lt;option value=&quot;small&quot;&gt;小&lt;/option&gt;&#10;                                &lt;option value=&quot;medium&quot;&gt;中&lt;/option&gt;&#10;                                &lt;option value=&quot;large&quot;&gt;大&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;紧凑模式&lt;/label&gt;&#10;                            &lt;div class=&quot;switch&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;compactMode&quot;&gt;&#10;                                &lt;span class=&quot;slider&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;div class=&quot;tab-content&quot; id=&quot;aiTab&quot;&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;AI回复速度&lt;/label&gt;&#10;                            &lt;select id=&quot;aiSpeed&quot;&gt;&#10;                                &lt;option value=&quot;fast&quot;&gt;快速&lt;/option&gt;&#10;                                &lt;option value=&quot;balanced&quot;&gt;平衡&lt;/option&gt;&#10;                                &lt;option value=&quot;creative&quot;&gt;创意&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;上下文长度&lt;/label&gt;&#10;                            &lt;select id=&quot;contextLength&quot;&gt;&#10;                                &lt;option value=&quot;short&quot;&gt;短 (4K)&lt;/option&gt;&#10;                                &lt;option value=&quot;medium&quot;&gt;中 (8K)&lt;/option&gt;&#10;                                &lt;option value=&quot;long&quot;&gt;长 (16K)&lt;/option&gt;&#10;                            &lt;/select&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div class=&quot;setting-item&quot;&gt;&#10;                            &lt;label&gt;流式输出&lt;/label&gt;&#10;                            &lt;div class=&quot;switch&quot;&gt;&#10;                                &lt;input type=&quot;checkbox&quot; id=&quot;streamOutput&quot; checked&gt;&#10;                                &lt;span class=&quot;slider&quot;&gt;&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;modal-actions&quot;&gt;&#10;                    &lt;button class=&quot;btn secondary&quot; onclick=&quot;closeSettingsModal()&quot;&gt;取消&lt;/button&gt;&#10;                    &lt;button class=&quot;btn primary&quot; onclick=&quot;saveSettings()&quot;&gt;保存设置&lt;/button&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    &lt;/div&gt;&#10;&#10;    &lt;script src=&quot;js/chat.js&quot;&gt;&lt;/script&gt;&#10;&lt;/body&gt;&#10;&lt;/html&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/css/auth.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/css/auth.css" />
              <option name="originalContent" value="/* 高级感AI聊天室认证页面样式 */&#10;:root {&#10;    /* 主色调 */&#10;    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;    --primary-color: #667eea;&#10;    --primary-dark: #5a67d8;&#10;    --secondary-color: #764ba2;&#10;&#10;    /* 中性色 */&#10;    --white: #ffffff;&#10;    --gray-50: #f9fafb;&#10;    --gray-100: #f3f4f6;&#10;    --gray-200: #e5e7eb;&#10;    --gray-300: #d1d5db;&#10;    --gray-400: #9ca3af;&#10;    --gray-500: #6b7280;&#10;    --gray-600: #4b5563;&#10;    --gray-700: #374151;&#10;    --gray-800: #1f2937;&#10;    --gray-900: #111827;&#10;&#10;    /* 功能色 */&#10;    --success: #10b981;&#10;    --warning: #f59e0b;&#10;    --error: #ef4444;&#10;&#10;    /* 阴影 */&#10;    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);&#10;    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);&#10;    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);&#10;    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);&#10;    --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);&#10;&#10;    /* 动画 */&#10;    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);&#10;    --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);&#10;    --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);&#10;&#10;    /* 圆角 */&#10;    --radius-sm: 6px;&#10;    --radius-md: 8px;&#10;    --radius-lg: 12px;&#10;    --radius-xl: 16px;&#10;    --radius-2xl: 24px;&#10;}&#10;&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;&#10;    font-feature-settings: 'cv11', 'ss01';&#10;    font-variation-settings: 'opsz' 32;&#10;    line-height: 1.6;&#10;    color: var(--gray-900);&#10;    background: var(--gray-50);&#10;    -webkit-font-smoothing: antialiased;&#10;    -moz-osx-font-smoothing: grayscale;&#10;}&#10;&#10;/* 背景 */&#10;.auth-background {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    z-index: -1;&#10;    overflow: hidden;&#10;}&#10;&#10;.bg-gradient {&#10;    position: absolute;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: var(--primary-gradient);&#10;    opacity: 0.9;&#10;}&#10;&#10;.bg-pattern {&#10;    position: absolute;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background-image:&#10;        radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),&#10;        radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),&#10;        linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.02) 50%, transparent 60%);&#10;    animation: pattern-shift 20s ease-in-out infinite;&#10;}&#10;&#10;@keyframes pattern-shift {&#10;    0%, 100% { transform: translate(0, 0) rotate(0deg); }&#10;    33% { transform: translate(-10px, -10px) rotate(1deg); }&#10;    66% { transform: translate(10px, -5px) rotate(-1deg); }&#10;}&#10;&#10;/* 主容器 */&#10;.auth-container {&#10;    min-height: 100vh;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    padding: 2rem 1rem;&#10;}&#10;&#10;.auth-card {&#10;    width: 100%;&#10;    max-width: 440px;&#10;    background: rgba(255, 255, 255, 0.95);&#10;    backdrop-filter: blur(20px) saturate(180%);&#10;    border: 1px solid rgba(255, 255, 255, 0.3);&#10;    border-radius: var(--radius-2xl);&#10;    box-shadow: var(--shadow-2xl);&#10;    overflow: hidden;&#10;    position: relative;&#10;}&#10;&#10;.auth-card::before {&#10;    content: '';&#10;    position: absolute;&#10;    top: 0;&#10;    left: 0;&#10;    right: 0;&#10;    height: 1px;&#10;    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);&#10;}&#10;&#10;/* 头部 */&#10;.auth-header {&#10;    padding: 2.5rem 2rem 1.5rem;&#10;    text-align: center;&#10;    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);&#10;    border-bottom: 1px solid rgba(255, 255, 255, 0.1);&#10;}&#10;&#10;.brand-logo {&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 1rem;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.logo-icon {&#10;    width: 48px;&#10;    height: 48px;&#10;    background: var(--primary-gradient);&#10;    border-radius: var(--radius-lg);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    color: var(--white);&#10;    font-size: 20px;&#10;    box-shadow: var(--shadow-lg);&#10;    position: relative;&#10;}&#10;&#10;.logo-icon::after {&#10;    content: '';&#10;    position: absolute;&#10;    inset: -2px;&#10;    background: var(--primary-gradient);&#10;    border-radius: var(--radius-lg);&#10;    z-index: -1;&#10;    opacity: 0.3;&#10;    filter: blur(8px);&#10;}&#10;&#10;.brand-text h1 {&#10;    font-size: 1.75rem;&#10;    font-weight: 700;&#10;    color: var(--gray-900);&#10;    margin: 0;&#10;    letter-spacing: -0.025em;&#10;}&#10;&#10;.brand-text span {&#10;    font-size: 0.875rem;&#10;    color: var(--gray-500);&#10;    font-weight: 400;&#10;    letter-spacing: 0.025em;&#10;    text-transform: uppercase;&#10;}&#10;&#10;/* 内容区域 */&#10;.auth-content {&#10;    padding: 2rem;&#10;}&#10;&#10;/* 导航切换 */&#10;.auth-nav {&#10;    position: relative;&#10;    display: flex;&#10;    background: var(--gray-100);&#10;    border-radius: var(--radius-lg);&#10;    padding: 4px;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.nav-link {&#10;    flex: 1;&#10;    text-align: center;&#10;    padding: 0.75rem 1rem;&#10;    text-decoration: none;&#10;    color: var(--gray-600);&#10;    font-weight: 500;&#10;    font-size: 0.875rem;&#10;    border-radius: var(--radius-md);&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    z-index: 2;&#10;}&#10;&#10;.nav-link.active {&#10;    color: var(--primary-color);&#10;}&#10;&#10;.nav-indicator {&#10;    position: absolute;&#10;    top: 4px;&#10;    left: 4px;&#10;    width: calc(50% - 4px);&#10;    height: calc(100% - 8px);&#10;    background: var(--white);&#10;    border-radius: var(--radius-md);&#10;    box-shadow: var(--shadow-sm);&#10;    transition: var(--transition-normal);&#10;    z-index: 1;&#10;}&#10;&#10;.nav-link:last-child.active ~ .nav-indicator {&#10;    transform: translateX(100%);&#10;}&#10;&#10;/* 表单区域 */&#10;.form-section {&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.section-header {&#10;    text-align: center;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.section-header h2 {&#10;    font-size: 1.5rem;&#10;    font-weight: 600;&#10;    color: var(--gray-900);&#10;    margin-bottom: 0.5rem;&#10;    letter-spacing: -0.025em;&#10;}&#10;&#10;.section-header p {&#10;    color: var(--gray-600);&#10;    font-size: 0.875rem;&#10;    font-weight: 400;&#10;}&#10;&#10;/* 表单样式 */&#10;.premium-form {&#10;    space-y: 1.25rem;&#10;}&#10;&#10;.form-row {&#10;    margin-bottom: 1.25rem;&#10;}&#10;&#10;.input-group {&#10;    position: relative;&#10;}&#10;&#10;.input-label {&#10;    display: block;&#10;    font-size: 0.8rem;&#10;    font-weight: 500;&#10;    color: var(--gray-700);&#10;    margin-bottom: 0.375rem;&#10;    letter-spacing: 0.01em;&#10;}&#10;&#10;.input-container {&#10;    position: relative;&#10;    margin-bottom: 8px;&#10;}&#10;&#10;.input-container .input-icon {&#10;    position: absolute;&#10;    left: 16px;&#10;    top: 50%;&#10;    transform: translateY(-50%);&#10;    color: var(--gray-400);&#10;    font-size: 16px;&#10;    z-index: 2;&#10;    pointer-events: none;&#10;    transition: all var(--transition-normal);&#10;}&#10;&#10;.input-container.focused .input-icon,&#10;.input-container:has(.premium-input:focus) .input-icon {&#10;    color: var(--primary-color);&#10;    transform: translateY(-50%) scale(1.1);&#10;}&#10;&#10;.premium-input {&#10;    width: 100%;&#10;    padding: 16px 16px 16px 48px;&#10;    border: 2px solid var(--gray-200);&#10;    border-radius: var(--radius-lg);&#10;    font-size: 16px;&#10;    font-family: 'Inter', sans-serif;&#10;    background: var(--white);&#10;    transition: all var(--transition-normal);&#10;    outline: none;&#10;    resize: none;&#10;}&#10;&#10;.premium-input:focus {&#10;    border-color: var(--primary-color);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;.premium-input::placeholder {&#10;    color: var(--gray-400);&#10;    font-weight: 400;&#10;}&#10;&#10;/* 密码显示按钮 */&#10;.password-reveal {&#10;    position: absolute;&#10;    right: 16px;&#10;    top: 50%;&#10;    transform: translateY(-50%);&#10;    background: none;&#10;    border: none;&#10;    color: var(--gray-400);&#10;    font-size: 16px;&#10;    cursor: pointer;&#10;    padding: 8px;&#10;    border-radius: var(--radius-sm);&#10;    transition: all var(--transition-normal);&#10;    z-index: 2;&#10;}&#10;&#10;.password-reveal:hover {&#10;    color: var(--primary-color);&#10;    background: rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;/* 错误状态 */&#10;.input-container.error .premium-input {&#10;    border-color: var(--error);&#10;    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);&#10;}&#10;&#10;.input-container.error .input-icon {&#10;    color: var(--error);&#10;}&#10;&#10;/* 输入反馈信息 */&#10;.input-feedback {&#10;    display: none;&#10;    color: var(--error);&#10;    font-size: 14px;&#10;    margin-top: 6px;&#10;    margin-left: 4px;&#10;    font-weight: 500;&#10;}&#10;&#10;/* 消息提示样式 */&#10;.auth-message {&#10;    margin-bottom: 24px;&#10;    padding: 16px 20px;&#10;    border-radius: var(--radius-lg);&#10;    font-size: 14px;&#10;    font-weight: 500;&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 12px;&#10;    animation: slideInDown 0.3s ease-out;&#10;}&#10;&#10;.auth-message.success {&#10;    background: rgba(16, 185, 129, 0.1);&#10;    color: var(--success);&#10;    border: 1px solid rgba(16, 185, 129, 0.2);&#10;}&#10;&#10;.auth-message.error {&#10;    background: rgba(239, 68, 68, 0.1);&#10;    color: var(--error);&#10;    border: 1px solid rgba(239, 68, 68, 0.2);&#10;}&#10;&#10;.auth-message.info {&#10;    background: rgba(102, 126, 234, 0.1);&#10;    color: var(--primary-color);&#10;    border: 1px solid rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;/* 表单选项 */&#10;.form-options {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.premium-checkbox {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.5rem;&#10;    cursor: pointer;&#10;    font-size: 0.875rem;&#10;    color: var(--gray-600);&#10;}&#10;&#10;.premium-checkbox input[type=&quot;checkbox&quot;] {&#10;    position: absolute;&#10;    opacity: 0;&#10;    pointer-events: none;&#10;}&#10;&#10;.checkbox-custom {&#10;    width: 18px;&#10;    height: 18px;&#10;    border: 2px solid var(--gray-300);&#10;    border-radius: var(--radius-sm);&#10;    background: var(--white);&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    flex-shrink: 0;&#10;}&#10;&#10;.premium-checkbox input[type=&quot;checkbox&quot;]:checked + .checkbox-custom {&#10;    background: var(--primary-color);&#10;    border-color: var(--primary-color);&#10;}&#10;&#10;.premium-checkbox input[type=&quot;checkbox&quot;]:checked + .checkbox-custom::after {&#10;    content: '';&#10;    position: absolute;&#10;    left: 5px;&#10;    top: 1px;&#10;    width: 6px;&#10;    height: 10px;&#10;    border: solid var(--white);&#10;    border-width: 0 2px 2px 0;&#10;    transform: rotate(45deg);&#10;}&#10;&#10;.checkbox-label {&#10;    font-weight: 400;&#10;    user-select: none;&#10;}&#10;&#10;.text-link {&#10;    color: var(--primary-color);&#10;    text-decoration: none;&#10;    font-weight: 500;&#10;    font-size: 0.875rem;&#10;    transition: var(--transition-normal);&#10;}&#10;&#10;.text-link:hover {&#10;    color: var(--primary-dark);&#10;    text-decoration: underline;&#10;}&#10;&#10;/* 服务条款部分 */&#10;.terms-section {&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.terms-section .premium-checkbox {&#10;    align-items: flex-start;&#10;    gap: 0.75rem;&#10;}&#10;&#10;.terms-section .checkbox-label {&#10;    line-height: 1.5;&#10;}&#10;&#10;/* 按钮样式 */&#10;.premium-btn {&#10;    width: 100%;&#10;    padding: 1rem 1.5rem;&#10;    border: none;&#10;    border-radius: var(--radius-lg);&#10;    font-family: 'Inter', sans-serif;&#10;    font-size: 1rem;&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    overflow: hidden;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.premium-btn.primary {&#10;    background: var(--primary-gradient);&#10;    color: var(--white);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.premium-btn.primary:hover {&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-xl);&#10;}&#10;&#10;.premium-btn.primary:active {&#10;    transform: translateY(0);&#10;}&#10;&#10;.btn-shine {&#10;    position: absolute;&#10;    top: 0;&#10;    left: -100%;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);&#10;    transition: left 0.5s;&#10;}&#10;&#10;.premium-btn:hover .btn-shine {&#10;    left: 100%;&#10;}&#10;&#10;/* 分割线 */&#10;.divider-section {&#10;    display: flex;&#10;    align-items: center;&#10;    margin: 2rem 0;&#10;}&#10;&#10;.divider-line {&#10;    flex: 1;&#10;    height: 1px;&#10;    background: var(--gray-200);&#10;}&#10;&#10;.divider-text {&#10;    padding: 0 1rem;&#10;    font-size: 0.875rem;&#10;    color: var(--gray-500);&#10;    font-weight: 500;&#10;}&#10;&#10;/* 社交登录 */&#10;.social-section {&#10;    display: flex;&#10;    gap: 1rem;&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.social-btn {&#10;    flex: 1;&#10;    padding: 0.875rem 1rem;&#10;    border: 1px solid var(--gray-200);&#10;    border-radius: var(--radius-lg);&#10;    background: var(--white);&#10;    color: var(--gray-700);&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.social-btn:hover {&#10;    border-color: var(--gray-300);&#10;    background: var(--gray-50);&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-sm);&#10;}&#10;&#10;.social-icon {&#10;    font-size: 1rem;&#10;}&#10;&#10;.github-btn:hover {&#10;    border-color: #333;&#10;    color: #333;&#10;}&#10;&#10;.google-btn:hover {&#10;    border-color: #4285f4;&#10;    color: #4285f4;&#10;}&#10;&#10;/* 页脚 */&#10;.auth-footer {&#10;    text-align: center;&#10;    color: var(--gray-600);&#10;    font-size: 0.875rem;&#10;}&#10;&#10;.auth-footer .text-link.primary {&#10;    color: var(--primary-color);&#10;    font-weight: 600;&#10;}&#10;&#10;/* 动画 */&#10;@keyframes slideInRight {&#10;    from {&#10;        transform: translateX(100%);&#10;        opacity: 0;&#10;    }&#10;    to {&#10;        transform: translateX(0);&#10;        opacity: 1;&#10;    }&#10;}&#10;&#10;@keyframes slideInDown {&#10;    from {&#10;        opacity: 0;&#10;        transform: translateY(-10px);&#10;    }&#10;    to {&#10;        opacity: 1;&#10;        transform: translateY(0);&#10;    }&#10;}&#10;&#10;@keyframes spin {&#10;    from {&#10;        transform: rotate(0deg);&#10;    }&#10;    to {&#10;        transform: rotate(360deg);&#10;    }&#10;}&#10;&#10;.fa-spinner {&#10;    animation: spin 1s linear infinite;&#10;}&#10;&#10;/* 响应式设计 */&#10;@media (max-width: 480px) {&#10;    .auth-container {&#10;        padding: 1rem;&#10;    }&#10;&#10;    .auth-card {&#10;        max-width: 100%;&#10;    }&#10;&#10;    .auth-header {&#10;        padding: 2rem 1.5rem 1rem;&#10;    }&#10;&#10;    .auth-content {&#10;        padding: 1.5rem;&#10;    }&#10;&#10;    .brand-logo {&#10;        flex-direction: column;&#10;        gap: 0.75rem;&#10;    }&#10;&#10;    .brand-text h1 {&#10;        font-size: 1.5rem;&#10;    }&#10;&#10;    .social-section {&#10;        flex-direction: column;&#10;    }&#10;&#10;    .form-options {&#10;        flex-direction: column;&#10;        align-items: flex-start;&#10;        gap: 1rem;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .auth-container {&#10;        padding: 20px;&#10;    }&#10;&#10;    .auth-card {&#10;        margin: 0;&#10;        border-radius: var(--radius-xl);&#10;    }&#10;&#10;    .premium-input {&#10;        padding: 14px 14px 14px 44px;&#10;        font-size: 16px; /* 防止iOS缩放 */&#10;    }&#10;&#10;    .input-container .input-icon {&#10;        left: 14px;&#10;        font-size: 15px;&#10;    }&#10;&#10;    .password-reveal {&#10;        right: 14px;&#10;        font-size: 15px;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="/* 高级感AI聊天室认证页面样式 */&#10;:root {&#10;    /* 主色调 */&#10;    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;    --primary-color: #667eea;&#10;    --primary-dark: #5a67d8;&#10;    --secondary-color: #764ba2;&#10;&#10;    /* 中性色 */&#10;    --white: #ffffff;&#10;    --gray-50: #f9fafb;&#10;    --gray-100: #f3f4f6;&#10;    --gray-200: #e5e7eb;&#10;    --gray-300: #d1d5db;&#10;    --gray-400: #9ca3af;&#10;    --gray-500: #6b7280;&#10;    --gray-600: #4b5563;&#10;    --gray-700: #374151;&#10;    --gray-800: #1f2937;&#10;    --gray-900: #111827;&#10;&#10;    /* 功能色 */&#10;    --success: #10b981;&#10;    --warning: #f59e0b;&#10;    --error: #ef4444;&#10;&#10;    /* 阴影 */&#10;    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);&#10;    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);&#10;    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);&#10;    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);&#10;    --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);&#10;&#10;    /* 动画 */&#10;    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);&#10;    --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);&#10;    --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);&#10;&#10;    /* 圆角 */&#10;    --radius-sm: 6px;&#10;    --radius-md: 8px;&#10;    --radius-lg: 12px;&#10;    --radius-xl: 16px;&#10;    --radius-2xl: 24px;&#10;}&#10;&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;&#10;    font-feature-settings: 'cv11', 'ss01';&#10;    font-variation-settings: 'opsz' 32;&#10;    line-height: 1.6;&#10;    color: var(--gray-900);&#10;    background: var(--gray-50);&#10;    -webkit-font-smoothing: antialiased;&#10;    -moz-osx-font-smoothing: grayscale;&#10;}&#10;&#10;/* 背景 */&#10;.auth-background {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    z-index: -1;&#10;    overflow: hidden;&#10;}&#10;&#10;.bg-gradient {&#10;    position: absolute;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: var(--primary-gradient);&#10;    opacity: 0.9;&#10;}&#10;&#10;.bg-pattern {&#10;    position: absolute;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background-image:&#10;        radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),&#10;        radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.05) 0%, transparent 50%),&#10;        linear-gradient(45deg, transparent 40%, rgba(255, 255, 255, 0.02) 50%, transparent 60%);&#10;    animation: pattern-shift 20s ease-in-out infinite;&#10;}&#10;&#10;@keyframes pattern-shift {&#10;    0%, 100% { transform: translate(0, 0) rotate(0deg); }&#10;    33% { transform: translate(-10px, -10px) rotate(1deg); }&#10;    66% { transform: translate(10px, -5px) rotate(-1deg); }&#10;}&#10;&#10;/* 主容器 */&#10;.auth-container {&#10;    min-height: 100vh;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    padding: 2rem 1rem;&#10;}&#10;&#10;.auth-card {&#10;    width: 100%;&#10;    max-width: 440px;&#10;    background: rgba(255, 255, 255, 0.95);&#10;    backdrop-filter: blur(20px) saturate(180%);&#10;    border: 1px solid rgba(255, 255, 255, 0.3);&#10;    border-radius: var(--radius-2xl);&#10;    box-shadow: var(--shadow-2xl);&#10;    overflow: hidden;&#10;    position: relative;&#10;}&#10;&#10;.auth-card::before {&#10;    content: '';&#10;    position: absolute;&#10;    top: 0;&#10;    left: 0;&#10;    right: 0;&#10;    height: 1px;&#10;    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);&#10;}&#10;&#10;/* 头部 */&#10;.auth-header {&#10;    padding: 2.5rem 2rem 1.5rem;&#10;    text-align: center;&#10;    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);&#10;    border-bottom: 1px solid rgba(255, 255, 255, 0.1);&#10;}&#10;&#10;.brand-logo {&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 1rem;&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.logo-icon {&#10;    width: 48px;&#10;    height: 48px;&#10;    background: var(--primary-gradient);&#10;    border-radius: var(--radius-lg);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    color: var(--white);&#10;    font-size: 20px;&#10;    box-shadow: var(--shadow-lg);&#10;    position: relative;&#10;}&#10;&#10;.logo-icon::after {&#10;    content: '';&#10;    position: absolute;&#10;    inset: -2px;&#10;    background: var(--primary-gradient);&#10;    border-radius: var(--radius-lg);&#10;    z-index: -1;&#10;    opacity: 0.3;&#10;    filter: blur(8px);&#10;}&#10;&#10;.brand-text h1 {&#10;    font-size: 1.75rem;&#10;    font-weight: 700;&#10;    color: var(--gray-900);&#10;    margin: 0;&#10;    letter-spacing: -0.025em;&#10;}&#10;&#10;.brand-text span {&#10;    font-size: 0.875rem;&#10;    color: var(--gray-500);&#10;    font-weight: 400;&#10;    letter-spacing: 0.025em;&#10;    text-transform: uppercase;&#10;}&#10;&#10;/* 内容区域 */&#10;.auth-content {&#10;    padding: 2rem;&#10;}&#10;&#10;/* 导航切换 */&#10;.auth-nav {&#10;    position: relative;&#10;    display: flex;&#10;    background: var(--gray-100);&#10;    border-radius: var(--radius-lg);&#10;    padding: 4px;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.nav-link {&#10;    flex: 1;&#10;    text-align: center;&#10;    padding: 0.75rem 1rem;&#10;    text-decoration: none;&#10;    color: var(--gray-600);&#10;    font-weight: 500;&#10;    font-size: 0.875rem;&#10;    border-radius: var(--radius-md);&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    z-index: 2;&#10;}&#10;&#10;.nav-link.active {&#10;    color: var(--primary-color);&#10;}&#10;&#10;.nav-indicator {&#10;    position: absolute;&#10;    top: 4px;&#10;    left: 4px;&#10;    width: calc(50% - 4px);&#10;    height: calc(100% - 8px);&#10;    background: var(--white);&#10;    border-radius: var(--radius-md);&#10;    box-shadow: var(--shadow-sm);&#10;    transition: var(--transition-normal);&#10;    z-index: 1;&#10;}&#10;&#10;.nav-link:last-child.active ~ .nav-indicator {&#10;    transform: translateX(100%);&#10;}&#10;&#10;/* 表单区域 */&#10;.form-section {&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.section-header {&#10;    text-align: center;&#10;    margin-bottom: 2rem;&#10;}&#10;&#10;.section-header h2 {&#10;    font-size: 1.5rem;&#10;    font-weight: 600;&#10;    color: var(--gray-900);&#10;    margin-bottom: 0.5rem;&#10;    letter-spacing: -0.025em;&#10;}&#10;&#10;.section-header p {&#10;    color: var(--gray-600);&#10;    font-size: 0.875rem;&#10;    font-weight: 400;&#10;}&#10;&#10;/* 表单样式 */&#10;.premium-form {&#10;    space-y: 1.25rem;&#10;}&#10;&#10;.form-row {&#10;    margin-bottom: 1.25rem;&#10;}&#10;&#10;.input-group {&#10;    position: relative;&#10;}&#10;&#10;.input-label {&#10;    display: block;&#10;    font-size: 0.8rem;&#10;    font-weight: 500;&#10;    color: var(--gray-700);&#10;    margin-bottom: 0.375rem;&#10;    letter-spacing: 0.01em;&#10;}&#10;&#10;.input-container {&#10;    position: relative;&#10;    margin-bottom: 8px;&#10;}&#10;&#10;.input-container .input-icon {&#10;    position: absolute;&#10;    left: 16px;&#10;    top: 50%;&#10;    transform: translateY(-50%);&#10;    color: var(--gray-400);&#10;    font-size: 16px;&#10;    z-index: 2;&#10;    pointer-events: none;&#10;    transition: all var(--transition-normal);&#10;}&#10;&#10;.input-container.focused .input-icon,&#10;.input-container:has(.premium-input:focus) .input-icon {&#10;    color: var(--primary-color);&#10;    transform: translateY(-50%) scale(1.1);&#10;}&#10;&#10;.premium-input {&#10;    width: 100%;&#10;    padding: 16px 16px 16px 48px;&#10;    border: 2px solid var(--gray-200);&#10;    border-radius: var(--radius-lg);&#10;    font-size: 16px;&#10;    font-family: 'Inter', sans-serif;&#10;    background: var(--white);&#10;    transition: all var(--transition-normal);&#10;    outline: none;&#10;    resize: none;&#10;}&#10;&#10;.premium-input:focus {&#10;    border-color: var(--primary-color);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;.premium-input::placeholder {&#10;    color: var(--gray-400);&#10;    font-weight: 400;&#10;}&#10;&#10;/* 密码显示按钮 */&#10;.password-reveal {&#10;    position: absolute;&#10;    right: 16px;&#10;    top: 50%;&#10;    transform: translateY(-50%);&#10;    background: none;&#10;    border: none;&#10;    color: var(--gray-400);&#10;    font-size: 16px;&#10;    cursor: pointer;&#10;    padding: 8px;&#10;    border-radius: var(--radius-sm);&#10;    transition: all var(--transition-normal);&#10;    z-index: 2;&#10;}&#10;&#10;.password-reveal:hover {&#10;    color: var(--primary-color);&#10;    background: rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;/* 错误状态 */&#10;.input-container.error .premium-input {&#10;    border-color: var(--error);&#10;    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);&#10;}&#10;&#10;.input-container.error .input-icon {&#10;    color: var(--error);&#10;}&#10;&#10;/* 输入反馈信息 */&#10;.input-feedback {&#10;    display: none;&#10;    color: var(--error);&#10;    font-size: 14px;&#10;    margin-top: 6px;&#10;    margin-left: 4px;&#10;    font-weight: 500;&#10;}&#10;&#10;/* 消息提示样式 */&#10;.auth-message {&#10;    margin-bottom: 24px;&#10;    padding: 16px 20px;&#10;    border-radius: var(--radius-lg);&#10;    font-size: 14px;&#10;    font-weight: 500;&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 12px;&#10;    animation: slideInDown 0.3s ease-out;&#10;}&#10;&#10;.auth-message.success {&#10;    background: rgba(16, 185, 129, 0.1);&#10;    color: var(--success);&#10;    border: 1px solid rgba(16, 185, 129, 0.2);&#10;}&#10;&#10;.auth-message.error {&#10;    background: rgba(239, 68, 68, 0.1);&#10;    color: var(--error);&#10;    border: 1px solid rgba(239, 68, 68, 0.2);&#10;}&#10;&#10;.auth-message.info {&#10;    background: rgba(102, 126, 234, 0.1);&#10;    color: var(--primary-color);&#10;    border: 1px solid rgba(102, 126, 234, 0.2);&#10;}&#10;&#10;/* 表单选项 */&#10;.form-options {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.premium-checkbox {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.5rem;&#10;    cursor: pointer;&#10;    font-size: 0.875rem;&#10;    color: var(--gray-600);&#10;}&#10;&#10;.premium-checkbox input[type=&quot;checkbox&quot;] {&#10;    position: absolute;&#10;    opacity: 0;&#10;    pointer-events: none;&#10;}&#10;&#10;.checkbox-custom {&#10;    width: 18px;&#10;    height: 18px;&#10;    border: 2px solid var(--gray-300);&#10;    border-radius: var(--radius-sm);&#10;    background: var(--white);&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    flex-shrink: 0;&#10;}&#10;&#10;.premium-checkbox input[type=&quot;checkbox&quot;]:checked + .checkbox-custom {&#10;    background: var(--primary-color);&#10;    border-color: var(--primary-color);&#10;}&#10;&#10;.premium-checkbox input[type=&quot;checkbox&quot;]:checked + .checkbox-custom::after {&#10;    content: '';&#10;    position: absolute;&#10;    left: 5px;&#10;    top: 1px;&#10;    width: 6px;&#10;    height: 10px;&#10;    border: solid var(--white);&#10;    border-width: 0 2px 2px 0;&#10;    transform: rotate(45deg);&#10;}&#10;&#10;.checkbox-label {&#10;    font-weight: 400;&#10;    user-select: none;&#10;}&#10;&#10;.text-link {&#10;    color: var(--primary-color);&#10;    text-decoration: none;&#10;    font-weight: 500;&#10;    font-size: 0.875rem;&#10;    transition: var(--transition-normal);&#10;}&#10;&#10;.text-link:hover {&#10;    color: var(--primary-dark);&#10;    text-decoration: underline;&#10;}&#10;&#10;/* 服务条款部分 */&#10;.terms-section {&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.terms-section .premium-checkbox {&#10;    align-items: flex-start;&#10;    gap: 0.75rem;&#10;}&#10;&#10;.terms-section .checkbox-label {&#10;    line-height: 1.5;&#10;}&#10;&#10;/* 按钮样式 */&#10;.premium-btn {&#10;    width: 100%;&#10;    padding: 1rem 1.5rem;&#10;    border: none;&#10;    border-radius: var(--radius-lg);&#10;    font-family: 'Inter', sans-serif;&#10;    font-size: 1rem;&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    overflow: hidden;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.premium-btn.primary {&#10;    background: var(--primary-gradient);&#10;    color: var(--white);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.premium-btn.primary:hover {&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-xl);&#10;}&#10;&#10;.premium-btn.primary:active {&#10;    transform: translateY(0);&#10;}&#10;&#10;.btn-shine {&#10;    position: absolute;&#10;    top: 0;&#10;    left: -100%;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);&#10;    transition: left 0.5s;&#10;}&#10;&#10;.premium-btn:hover .btn-shine {&#10;    left: 100%;&#10;}&#10;&#10;/* 按钮加载状态 */&#10;.premium-btn {&#10;    position: relative;&#10;    overflow: hidden;&#10;}&#10;&#10;.premium-btn .btn-content {&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    transition: all var(--transition-normal);&#10;    position: relative;&#10;}&#10;&#10;.premium-btn .btn-text {&#10;    transition: opacity var(--transition-normal);&#10;    opacity: 1;&#10;}&#10;&#10;.premium-btn .btn-loading {&#10;    opacity: 0;&#10;    position: absolute;&#10;    left: 50%;&#10;    top: 50%;&#10;    transform: translate(-50%, -50%);&#10;    transition: opacity var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 8px;&#10;    white-space: nowrap;&#10;}&#10;&#10;.premium-btn.loading .btn-text {&#10;    opacity: 0;&#10;}&#10;&#10;.premium-btn.loading .btn-loading {&#10;    opacity: 1;&#10;}&#10;&#10;.premium-btn.loading {&#10;    pointer-events: none;&#10;    opacity: 0.8;&#10;}&#10;&#10;/* 分割线 */&#10;.divider-section {&#10;    display: flex;&#10;    align-items: center;&#10;    margin: 2rem 0;&#10;}&#10;&#10;.divider-line {&#10;    flex: 1;&#10;    height: 1px;&#10;    background: var(--gray-200);&#10;}&#10;&#10;.divider-text {&#10;    padding: 0 1rem;&#10;    font-size: 0.875rem;&#10;    color: var(--gray-500);&#10;    font-weight: 500;&#10;}&#10;&#10;/* 社交登录 */&#10;.social-section {&#10;    display: flex;&#10;    gap: 1rem;&#10;    margin-bottom: 1.5rem;&#10;}&#10;&#10;.social-btn {&#10;    flex: 1;&#10;    padding: 0.875rem 1rem;&#10;    border: 1px solid var(--gray-200);&#10;    border-radius: var(--radius-lg);&#10;    background: var(--white);&#10;    color: var(--gray-700);&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.social-btn:hover {&#10;    border-color: var(--gray-300);&#10;    background: var(--gray-50);&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-sm);&#10;}&#10;&#10;.social-icon {&#10;    font-size: 1rem;&#10;}&#10;&#10;.github-btn:hover {&#10;    border-color: #333;&#10;    color: #333;&#10;}&#10;&#10;.google-btn:hover {&#10;    border-color: #4285f4;&#10;    color: #4285f4;&#10;}&#10;&#10;/* 页脚 */&#10;.auth-footer {&#10;    text-align: center;&#10;    color: var(--gray-600);&#10;    font-size: 0.875rem;&#10;}&#10;&#10;.auth-footer .text-link.primary {&#10;    color: var(--primary-color);&#10;    font-weight: 600;&#10;}&#10;&#10;/* 动画 */&#10;@keyframes slideInRight {&#10;    from {&#10;        transform: translateX(100%);&#10;        opacity: 0;&#10;    }&#10;    to {&#10;        transform: translateX(0);&#10;        opacity: 1;&#10;    }&#10;}&#10;&#10;@keyframes slideInDown {&#10;    from {&#10;        opacity: 0;&#10;        transform: translateY(-10px);&#10;    }&#10;    to {&#10;        opacity: 1;&#10;        transform: translateY(0);&#10;    }&#10;}&#10;&#10;@keyframes spin {&#10;    from {&#10;        transform: rotate(0deg);&#10;    }&#10;    to {&#10;        transform: rotate(360deg);&#10;    }&#10;}&#10;&#10;.fa-spinner {&#10;    animation: spin 1s linear infinite;&#10;}&#10;&#10;/* 响应式设计 */&#10;@media (max-width: 480px) {&#10;    .auth-container {&#10;        padding: 1rem;&#10;    }&#10;&#10;    .auth-card {&#10;        max-width: 100%;&#10;    }&#10;&#10;    .auth-header {&#10;        padding: 2rem 1.5rem 1rem;&#10;    }&#10;&#10;    .auth-content {&#10;        padding: 1.5rem;&#10;    }&#10;&#10;    .brand-logo {&#10;        flex-direction: column;&#10;        gap: 0.75rem;&#10;    }&#10;&#10;    .brand-text h1 {&#10;        font-size: 1.5rem;&#10;    }&#10;&#10;    .social-section {&#10;        flex-direction: column;&#10;    }&#10;&#10;    .form-options {&#10;        flex-direction: column;&#10;        align-items: flex-start;&#10;        gap: 1rem;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .auth-container {&#10;        padding: 20px;&#10;    }&#10;&#10;    .auth-card {&#10;        margin: 0;&#10;        border-radius: var(--radius-xl);&#10;    }&#10;&#10;    .premium-input {&#10;        padding: 14px 14px 14px 44px;&#10;        font-size: 16px; /* 防止iOS缩放 */&#10;    }&#10;&#10;    .input-container .input-icon {&#10;        left: 14px;&#10;        font-size: 15px;&#10;    }&#10;&#10;    .password-reveal {&#10;        right: 14px;&#10;        font-size: 15px;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/css/chat.css">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/css/chat.css" />
              <option name="originalContent" value="/* AI聊天室样式 */&#10;:root {&#10;    /* 主色调 */&#10;    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#10;    --primary-color: #667eea;&#10;    --primary-dark: #5a67d8;&#10;    --secondary-color: #764ba2;&#10;&#10;    /* 中性色 */&#10;    --white: #ffffff;&#10;    --gray-50: #f9fafb;&#10;    --gray-100: #f3f4f6;&#10;    --gray-200: #e5e7eb;&#10;    --gray-300: #d1d5db;&#10;    --gray-400: #9ca3af;&#10;    --gray-500: #6b7280;&#10;    --gray-600: #4b5563;&#10;    --gray-700: #374151;&#10;    --gray-800: #1f2937;&#10;    --gray-900: #111827;&#10;&#10;    /* 功能色 */&#10;    --success: #10b981;&#10;    --warning: #f59e0b;&#10;    --error: #ef4444;&#10;    --info: #3b82f6;&#10;&#10;    /* 阴影 */&#10;    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);&#10;    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);&#10;    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);&#10;    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);&#10;&#10;    /* 动画 */&#10;    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);&#10;    --transition-normal: 200ms cubic-bezier(0.4, 0, 0.2, 1);&#10;    --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);&#10;&#10;    /* 圆角 */&#10;    --radius-sm: 6px;&#10;    --radius-md: 8px;&#10;    --radius-lg: 12px;&#10;    --radius-xl: 16px;&#10;    --radius-2xl: 24px;&#10;}&#10;&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;&#10;    font-feature-settings: 'cv11', 'ss01';&#10;    line-height: 1.6;&#10;    color: var(--gray-900);&#10;    background: var(--gray-50);&#10;    -webkit-font-smoothing: antialiased;&#10;    -moz-osx-font-smoothing: grayscale;&#10;}&#10;&#10;/* 主容器 */&#10;.chat-container {&#10;    display: flex;&#10;    height: 100vh;&#10;    background: var(--gray-50);&#10;}&#10;&#10;/* 侧边栏 */&#10;.sidebar {&#10;    width: 280px;&#10;    background: var(--white);&#10;    border-right: 1px solid var(--gray-200);&#10;    display: flex;&#10;    flex-direction: column;&#10;    box-shadow: var(--shadow-sm);&#10;}&#10;&#10;.sidebar-header {&#10;    padding: 1.5rem;&#10;    border-bottom: 1px solid var(--gray-200);&#10;}&#10;&#10;.brand-logo {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.75rem;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;.logo-icon {&#10;    width: 32px;&#10;    height: 32px;&#10;    background: var(--primary-gradient);&#10;    border-radius: var(--radius-md);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    color: var(--white);&#10;    font-size: 14px;&#10;}&#10;&#10;.brand-text {&#10;    font-size: 1.125rem;&#10;    font-weight: 600;&#10;    color: var(--gray-900);&#10;}&#10;&#10;.new-chat-btn {&#10;    width: 100%;&#10;    padding: 0.75rem 1rem;&#10;    background: var(--primary-gradient);&#10;    color: var(--white);&#10;    border: none;&#10;    border-radius: var(--radius-lg);&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.new-chat-btn:hover {&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;/* 聊天历史 */&#10;.chat-history {&#10;    flex: 1;&#10;    overflow-y: auto;&#10;    padding: 1rem;&#10;}&#10;&#10;.history-list {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.history-item {&#10;    padding: 0.75rem;&#10;    border-radius: var(--radius-md);&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    color: var(--gray-700);&#10;    font-size: 0.875rem;&#10;}&#10;&#10;.history-item:hover {&#10;    background: var(--gray-100);&#10;}&#10;&#10;.history-item.active {&#10;    background: var(--primary-color);&#10;    color: var(--white);&#10;}&#10;&#10;/* 用户信息 */&#10;.sidebar-footer {&#10;    padding: 1rem;&#10;    border-top: 1px solid var(--gray-200);&#10;}&#10;&#10;.user-info {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.75rem;&#10;}&#10;&#10;.user-avatar {&#10;    width: 36px;&#10;    height: 36px;&#10;    background: var(--gray-200);&#10;    border-radius: 50%;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    color: var(--gray-600);&#10;    font-size: 14px;&#10;}&#10;&#10;.user-details {&#10;    flex: 1;&#10;    min-width: 0;&#10;}&#10;&#10;.username {&#10;    display: block;&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    color: var(--gray-900);&#10;    white-space: nowrap;&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;}&#10;&#10;.user-email {&#10;    display: block;&#10;    font-size: 0.75rem;&#10;    color: var(--gray-500);&#10;    white-space: nowrap;&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;}&#10;&#10;.logout-btn {&#10;    width: 32px;&#10;    height: 32px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-sm);&#10;    color: var(--gray-400);&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.logout-btn:hover {&#10;    background: var(--gray-100);&#10;    color: var(--gray-600);&#10;}&#10;&#10;/* 主内容区域 */&#10;.main-content {&#10;    flex: 1;&#10;    display: flex;&#10;    flex-direction: column;&#10;    background: var(--white);&#10;}&#10;&#10;/* 聊天头部 */&#10;.chat-header {&#10;    padding: 1rem 1.5rem;&#10;    border-bottom: 1px solid var(--gray-200);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: space-between;&#10;    background: var(--white);&#10;}&#10;&#10;.chat-title h2 {&#10;    font-size: 1.125rem;&#10;    font-weight: 600;&#10;    color: var(--gray-900);&#10;    margin-bottom: 0.25rem;&#10;}&#10;&#10;.chat-status {&#10;    font-size: 0.75rem;&#10;    color: var(--success);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.25rem;&#10;}&#10;&#10;.chat-status::before {&#10;    content: '';&#10;    width: 6px;&#10;    height: 6px;&#10;    background: var(--success);&#10;    border-radius: 50%;&#10;}&#10;&#10;.chat-actions {&#10;    display: flex;&#10;    gap: 0.5rem;&#10;}&#10;&#10;.action-btn {&#10;    width: 36px;&#10;    height: 36px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    color: var(--gray-400);&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.action-btn:hover {&#10;    background: var(--gray-100);&#10;    color: var(--gray-600);&#10;}&#10;&#10;/* 消息区域 */&#10;.chat-messages {&#10;    flex: 1;&#10;    overflow-y: auto;&#10;    padding: 1.5rem;&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: 1rem;&#10;}&#10;&#10;.welcome-message {&#10;    text-align: center;&#10;    padding: 3rem 1rem;&#10;    color: var(--gray-500);&#10;}&#10;&#10;.welcome-icon {&#10;    width: 64px;&#10;    height: 64px;&#10;    background: var(--primary-gradient);&#10;    border-radius: 50%;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    color: var(--white);&#10;    font-size: 24px;&#10;    margin: 0 auto 1rem;&#10;}&#10;&#10;.welcome-message h3 {&#10;    font-size: 1.25rem;&#10;    font-weight: 600;&#10;    color: var(--gray-900);&#10;    margin-bottom: 0.5rem;&#10;}&#10;&#10;.welcome-message p {&#10;    font-size: 0.875rem;&#10;    color: var(--gray-600);&#10;}&#10;&#10;/* 消息气泡 */&#10;.message {&#10;    display: flex;&#10;    margin-bottom: 1rem;&#10;}&#10;&#10;.message.user {&#10;    justify-content: flex-end;&#10;}&#10;&#10;.message-content {&#10;    max-width: 70%;&#10;    padding: 0.875rem 1.125rem;&#10;    border-radius: var(--radius-xl);&#10;    font-size: 0.875rem;&#10;    line-height: 1.5;&#10;}&#10;&#10;.message.user .message-content {&#10;    background: var(--primary-gradient);&#10;    color: var(--white);&#10;    border-bottom-right-radius: var(--radius-sm);&#10;}&#10;&#10;.message.assistant .message-content {&#10;    background: var(--gray-100);&#10;    color: var(--gray-900);&#10;    border-bottom-left-radius: var(--radius-sm);&#10;}&#10;&#10;.message-avatar {&#10;    width: 32px;&#10;    height: 32px;&#10;    border-radius: 50%;&#10;    margin-right: 0.75rem;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    font-size: 14px;&#10;    flex-shrink: 0;&#10;}&#10;&#10;.message.user .message-avatar {&#10;    background: var(--primary-color);&#10;    color: var(--white);&#10;    order: 2;&#10;    margin-right: 0;&#10;    margin-left: 0.75rem;&#10;}&#10;&#10;.message.assistant .message-avatar {&#10;    background: var(--gray-200);&#10;    color: var(--gray-600);&#10;}&#10;&#10;.message-time {&#10;    font-size: 0.75rem;&#10;    color: var(--gray-400);&#10;    margin-top: 0.25rem;&#10;    text-align: center;&#10;}&#10;&#10;/* 输入区域 */&#10;.chat-input-area {&#10;    padding: 1.5rem;&#10;    border-top: 1px solid var(--gray-200);&#10;    background: var(--white);&#10;}&#10;&#10;.input-container {&#10;    max-width: 100%;&#10;}&#10;&#10;.input-wrapper {&#10;    display: flex;&#10;    align-items: flex-end;&#10;    background: var(--gray-50);&#10;    border: 2px solid var(--gray-200);&#10;    border-radius: var(--radius-xl);&#10;    padding: 0.75rem 1rem;&#10;    transition: var(--transition-normal);&#10;}&#10;&#10;.input-wrapper:focus-within {&#10;    border-color: var(--primary-color);&#10;    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);&#10;}&#10;&#10;#messageInput {&#10;    flex: 1;&#10;    border: none;&#10;    background: none;&#10;    outline: none;&#10;    resize: none;&#10;    font-size: 0.875rem;&#10;    line-height: 1.5;&#10;    font-family: inherit;&#10;    color: var(--gray-900);&#10;    min-height: 20px;&#10;    max-height: 120px;&#10;}&#10;&#10;#messageInput::placeholder {&#10;    color: var(--gray-400);&#10;}&#10;&#10;.input-actions {&#10;    display: flex;&#10;    gap: 0.5rem;&#10;    margin-left: 0.75rem;&#10;}&#10;&#10;.input-actions .action-btn {&#10;    width: 32px;&#10;    height: 32px;&#10;}&#10;&#10;.send-btn {&#10;    background: var(--primary-gradient);&#10;    color: var(--white);&#10;}&#10;&#10;.send-btn:hover {&#10;    background: var(--primary-gradient);&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.send-btn:disabled {&#10;    opacity: 0.5;&#10;    cursor: not-allowed;&#10;    transform: none;&#10;    box-shadow: none;&#10;}&#10;&#10;.input-footer {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    margin-top: 0.5rem;&#10;    font-size: 0.75rem;&#10;    color: var(--gray-400);&#10;}&#10;&#10;.char-count {&#10;    font-weight: 500;&#10;}&#10;&#10;.input-hint {&#10;    font-style: italic;&#10;}&#10;&#10;/* 加载状态 */&#10;.typing-indicator {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: 0.5rem;&#10;    padding: 0.875rem 1.125rem;&#10;    background: var(--gray-100);&#10;    border-radius: var(--radius-xl);&#10;    border-bottom-left-radius: var(--radius-sm);&#10;    max-width: 70%;&#10;    font-size: 0.875rem;&#10;    color: var(--gray-600);&#10;}&#10;&#10;.typing-dots {&#10;    display: flex;&#10;    gap: 0.25rem;&#10;}&#10;&#10;.typing-dot {&#10;    width: 6px;&#10;    height: 6px;&#10;    background: var(--gray-400);&#10;    border-radius: 50%;&#10;    animation: typing 1.4s infinite ease-in-out;&#10;}&#10;&#10;.typing-dot:nth-child(1) { animation-delay: -0.32s; }&#10;.typing-dot:nth-child(2) { animation-delay: -0.16s; }&#10;&#10;@keyframes typing {&#10;    0%, 80%, 100% { opacity: 0.3; }&#10;    40% { opacity: 1; }&#10;}&#10;&#10;/* 响应式设计 */&#10;@media (max-width: 768px) {&#10;    .sidebar {&#10;        width: 260px;&#10;        position: fixed;&#10;        left: -260px;&#10;        z-index: 1000;&#10;        transition: left var(--transition-normal);&#10;    }&#10;&#10;    .sidebar.open {&#10;        left: 0;&#10;    }&#10;&#10;    .main-content {&#10;        width: 100%;&#10;    }&#10;&#10;    .chat-messages {&#10;        padding: 1rem;&#10;    }&#10;&#10;    .chat-input-area {&#10;        padding: 1rem;&#10;    }&#10;&#10;    .message-content {&#10;        max-width: 85%;&#10;    }&#10;}&#10;&#10;@media (max-width: 480px) {&#10;    .chat-header {&#10;        padding: 1rem;&#10;    }&#10;&#10;    .chat-messages {&#10;        padding: 0.75rem;&#10;    }&#10;&#10;    .chat-input-area {&#10;        padding: 0.75rem;&#10;    }&#10;&#10;    .message-content {&#10;        max-width: 90%;&#10;        padding: 0.75rem 1rem;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="/* AI聊天室 - 高级深色主题样式 */&#10;:root {&#10;    /* 深色主题色彩系统 */&#10;    --bg-primary: #0d1117;&#10;    --bg-secondary: #161b22;&#10;    --bg-tertiary: #21262d;&#10;    --bg-hover: #30363d;&#10;    --bg-active: #373e47;&#10;    &#10;    /* 边框颜色 */&#10;    --border-primary: #30363d;&#10;    --border-secondary: #21262d;&#10;    --border-muted: #373e47;&#10;    &#10;    /* 文本颜色 */&#10;    --text-primary: #f0f6fc;&#10;    --text-secondary: #8b949e;&#10;    --text-muted: #656d76;&#10;    --text-accent: #58a6ff;&#10;    &#10;    /* 品牌色 */&#10;    --brand-primary: #58a6ff;&#10;    --brand-secondary: #1f6feb;&#10;    --brand-gradient: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%);&#10;    &#10;    /* 功能色 */&#10;    --success: #3fb950;&#10;    --warning: #d29922;&#10;    --error: #f85149;&#10;    --info: #79c0ff;&#10;    &#10;    /* 阴影 */&#10;    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);&#10;    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.16), 0 2px 4px rgba(0, 0, 0, 0.08);&#10;    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.2), 0 4px 6px rgba(0, 0, 0, 0.1);&#10;    --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.04);&#10;    &#10;    /* 动画 */&#10;    --transition-fast: 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94);&#10;    --transition-normal: 250ms cubic-bezier(0.25, 0.46, 0.45, 0.94);&#10;    --transition-slow: 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94);&#10;    &#10;    /* 圆角 */&#10;    --radius-xs: 4px;&#10;    --radius-sm: 6px;&#10;    --radius-md: 8px;&#10;    --radius-lg: 12px;&#10;    --radius-xl: 16px;&#10;    --radius-2xl: 24px;&#10;    &#10;    /* 间距 */&#10;    --space-xs: 4px;&#10;    --space-sm: 8px;&#10;    --space-md: 16px;&#10;    --space-lg: 24px;&#10;    --space-xl: 32px;&#10;}&#10;&#10;* {&#10;    margin: 0;&#10;    padding: 0;&#10;    box-sizing: border-box;&#10;}&#10;&#10;body {&#10;    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;&#10;    line-height: 1.6;&#10;    color: var(--text-primary);&#10;    background: var(--bg-primary);&#10;    -webkit-font-smoothing: antialiased;&#10;    -moz-osx-font-smoothing: grayscale;&#10;    overflow: hidden;&#10;}&#10;&#10;/* 主容器 */&#10;.chat-container {&#10;    display: flex;&#10;    height: 100vh;&#10;    background: var(--bg-primary);&#10;}&#10;&#10;/* 侧边栏 */&#10;.sidebar {&#10;    width: 320px;&#10;    background: var(--bg-secondary);&#10;    border-right: 1px solid var(--border-primary);&#10;    display: flex;&#10;    flex-direction: column;&#10;    transition: var(--transition-normal);&#10;    position: relative;&#10;    z-index: 100;&#10;}&#10;&#10;.sidebar-header {&#10;    padding: var(--space-lg);&#10;    border-bottom: 1px solid var(--border-primary);&#10;    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);&#10;}&#10;&#10;.brand-logo {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-md);&#10;    margin-bottom: var(--space-lg);&#10;}&#10;&#10;.logo-icon {&#10;    width: 40px;&#10;    height: 40px;&#10;    background: var(--brand-gradient);&#10;    border-radius: var(--radius-lg);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    color: white;&#10;    font-size: 18px;&#10;    box-shadow: var(--shadow-md);&#10;    position: relative;&#10;}&#10;&#10;.logo-icon::after {&#10;    content: '';&#10;    position: absolute;&#10;    inset: -2px;&#10;    background: var(--brand-gradient);&#10;    border-radius: var(--radius-lg);&#10;    z-index: -1;&#10;    opacity: 0.3;&#10;    filter: blur(8px);&#10;}&#10;&#10;.brand-text {&#10;    font-size: 1.25rem;&#10;    font-weight: 700;&#10;    color: var(--text-primary);&#10;    background: var(--brand-gradient);&#10;    -webkit-background-clip: text;&#10;    -webkit-text-fill-color: transparent;&#10;    background-clip: text;&#10;}&#10;&#10;.new-chat-btn {&#10;    width: 100%;&#10;    padding: var(--space-md) var(--space-lg);&#10;    background: var(--brand-gradient);&#10;    color: white;&#10;    border: none;&#10;    border-radius: var(--radius-lg);&#10;    font-size: 0.875rem;&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    gap: var(--space-sm);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.new-chat-btn:hover {&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-lg);&#10;}&#10;&#10;.new-chat-btn:active {&#10;    transform: translateY(0);&#10;}&#10;&#10;/* 聊天历史 */&#10;.chat-history {&#10;    flex: 1;&#10;    overflow: hidden;&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;.history-header {&#10;    padding: var(--space-lg) var(--space-lg) var(--space-md);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: space-between;&#10;}&#10;&#10;.history-header h3 {&#10;    font-size: 1rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;}&#10;&#10;.history-search-btn {&#10;    width: 32px;&#10;    height: 32px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-secondary);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.history-search-btn:hover {&#10;    background: var(--bg-hover);&#10;    color: var(--text-primary);&#10;}&#10;&#10;.search-container {&#10;    padding: 0 var(--space-lg) var(--space-md);&#10;    display: none;&#10;}&#10;&#10;.search-container.show {&#10;    display: block;&#10;}&#10;&#10;.search-input {&#10;    width: 100%;&#10;    padding: var(--space-sm) var(--space-md);&#10;    background: var(--bg-tertiary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-primary);&#10;    font-size: 0.875rem;&#10;    outline: none;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;.search-input:focus {&#10;    border-color: var(--brand-primary);&#10;    box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.2);&#10;}&#10;&#10;.search-input::placeholder {&#10;    color: var(--text-muted);&#10;}&#10;&#10;.history-list {&#10;    flex: 1;&#10;    overflow-y: auto;&#10;    padding: 0 var(--space-lg);&#10;}&#10;&#10;.history-list::-webkit-scrollbar {&#10;    width: 6px;&#10;}&#10;&#10;.history-list::-webkit-scrollbar-track {&#10;    background: transparent;&#10;}&#10;&#10;.history-list::-webkit-scrollbar-thumb {&#10;    background: var(--border-muted);&#10;    border-radius: 3px;&#10;}&#10;&#10;.history-list::-webkit-scrollbar-thumb:hover {&#10;    background: var(--text-muted);&#10;}&#10;&#10;.history-placeholder {&#10;    text-align: center;&#10;    padding: var(--space-xl) var(--space-md);&#10;    color: var(--text-muted);&#10;}&#10;&#10;.history-placeholder i {&#10;    font-size: 2rem;&#10;    margin-bottom: var(--space-md);&#10;    opacity: 0.5;&#10;}&#10;&#10;.history-placeholder p {&#10;    font-weight: 500;&#10;    margin-bottom: var(--space-xs);&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.history-placeholder span {&#10;    font-size: 0.875rem;&#10;}&#10;&#10;.history-item {&#10;    padding: var(--space-md);&#10;    border-radius: var(--radius-md);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    margin-bottom: var(--space-xs);&#10;    border: 1px solid transparent;&#10;    position: relative;&#10;    overflow: hidden;&#10;}&#10;&#10;.history-item:hover {&#10;    background: var(--bg-hover);&#10;    border-color: var(--border-muted);&#10;}&#10;&#10;.history-item.active {&#10;    background: var(--bg-active);&#10;    border-color: var(--brand-primary);&#10;    box-shadow: 0 0 0 1px rgba(88, 166, 255, 0.2);&#10;}&#10;&#10;.history-item .title {&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    color: var(--text-primary);&#10;    margin-bottom: var(--space-xs);&#10;    white-space: nowrap;&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;}&#10;&#10;.history-item .preview {&#10;    font-size: 0.75rem;&#10;    color: var(--text-muted);&#10;    white-space: nowrap;&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;}&#10;&#10;.history-item .meta {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    margin-top: var(--space-xs);&#10;    font-size: 0.75rem;&#10;    color: var(--text-muted);&#10;}&#10;&#10;/* 用户信息 */&#10;.sidebar-footer {&#10;    padding: var(--space-lg);&#10;    border-top: 1px solid var(--border-primary);&#10;    background: var(--bg-tertiary);&#10;}&#10;&#10;.user-info {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-md);&#10;}&#10;&#10;.user-avatar {&#10;    position: relative;&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;.user-avatar:hover {&#10;    transform: scale(1.05);&#10;}&#10;&#10;.avatar-img {&#10;    width: 40px;&#10;    height: 40px;&#10;    border-radius: 50%;&#10;    object-fit: cover;&#10;    border: 2px solid var(--border-primary);&#10;}&#10;&#10;.avatar-status {&#10;    position: absolute;&#10;    bottom: 0;&#10;    right: 0;&#10;    width: 12px;&#10;    height: 12px;&#10;    border-radius: 50%;&#10;    border: 2px solid var(--bg-tertiary);&#10;}&#10;&#10;.avatar-status.online {&#10;    background: var(--success);&#10;}&#10;&#10;.avatar-status.away {&#10;    background: var(--warning);&#10;}&#10;&#10;.avatar-status.offline {&#10;    background: var(--text-muted);&#10;}&#10;&#10;.user-details {&#10;    flex: 1;&#10;    min-width: 0;&#10;}&#10;&#10;.username {&#10;    display: block;&#10;    font-size: 0.875rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;    white-space: nowrap;&#10;    overflow: hidden;&#10;    text-overflow: ellipsis;&#10;}&#10;&#10;.user-status {&#10;    display: block;&#10;    font-size: 0.75rem;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.user-actions {&#10;    display: flex;&#10;    gap: var(--space-xs);&#10;}&#10;&#10;.user-action-btn {&#10;    width: 32px;&#10;    height: 32px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-secondary);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.user-action-btn:hover {&#10;    background: var(--bg-hover);&#10;    color: var(--text-primary);&#10;}&#10;&#10;/* 主内容区域 */&#10;.main-content {&#10;    flex: 1;&#10;    display: flex;&#10;    flex-direction: column;&#10;    background: var(--bg-primary);&#10;    position: relative;&#10;}&#10;&#10;/* 聊天头部 */&#10;.chat-header {&#10;    padding: var(--space-lg);&#10;    border-bottom: 1px solid var(--border-primary);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: space-between;&#10;    background: var(--bg-secondary);&#10;    backdrop-filter: blur(10px);&#10;}&#10;&#10;.header-left {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-md);&#10;}&#10;&#10;.sidebar-toggle {&#10;    display: none;&#10;    width: 40px;&#10;    height: 40px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-secondary);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;.sidebar-toggle:hover {&#10;    background: var(--bg-hover);&#10;    color: var(--text-primary);&#10;}&#10;&#10;.chat-title h2 {&#10;    font-size: 1.25rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;    margin-bottom: var(--space-xs);&#10;}&#10;&#10;.chat-status {&#10;    font-size: 0.75rem;&#10;    color: var(--success);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-xs);&#10;}&#10;&#10;.chat-status i {&#10;    font-size: 0.5rem;&#10;    animation: pulse 2s infinite;&#10;}&#10;&#10;@keyframes pulse {&#10;    0%, 100% { opacity: 1; }&#10;    50% { opacity: 0.5; }&#10;}&#10;&#10;.chat-actions {&#10;    display: flex;&#10;    gap: var(--space-sm);&#10;}&#10;&#10;.action-btn {&#10;    width: 40px;&#10;    height: 40px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-secondary);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.action-btn:hover {&#10;    background: var(--bg-hover);&#10;    color: var(--text-primary);&#10;    transform: translateY(-1px);&#10;}&#10;&#10;/* 消息区域 */&#10;.chat-messages {&#10;    flex: 1;&#10;    overflow-y: auto;&#10;    padding: var(--space-lg);&#10;    background: var(--bg-primary);&#10;}&#10;&#10;.chat-messages::-webkit-scrollbar {&#10;    width: 8px;&#10;}&#10;&#10;.chat-messages::-webkit-scrollbar-track {&#10;    background: transparent;&#10;}&#10;&#10;.chat-messages::-webkit-scrollbar-thumb {&#10;    background: var(--border-muted);&#10;    border-radius: 4px;&#10;}&#10;&#10;.chat-messages::-webkit-scrollbar-thumb:hover {&#10;    background: var(--text-muted);&#10;}&#10;&#10;/* 欢迎区域 */&#10;.welcome-section {&#10;    text-align: center;&#10;    padding: var(--space-xl) var(--space-md);&#10;    max-width: 600px;&#10;    margin: 0 auto;&#10;}&#10;&#10;.welcome-avatar {&#10;    margin-bottom: var(--space-lg);&#10;}&#10;&#10;.ai-avatar {&#10;    width: 80px;&#10;    height: 80px;&#10;    background: var(--brand-gradient);&#10;    border-radius: 50%;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    margin: 0 auto;&#10;    font-size: 2rem;&#10;    color: white;&#10;    box-shadow: var(--shadow-lg);&#10;    position: relative;&#10;}&#10;&#10;.ai-avatar::after {&#10;    content: '';&#10;    position: absolute;&#10;    inset: -4px;&#10;    background: var(--brand-gradient);&#10;    border-radius: 50%;&#10;    z-index: -1;&#10;    opacity: 0.3;&#10;    filter: blur(12px);&#10;}&#10;&#10;.welcome-content h3 {&#10;    font-size: 1.5rem;&#10;    font-weight: 700;&#10;    color: var(--text-primary);&#10;    margin-bottom: var(--space-sm);&#10;}&#10;&#10;.welcome-content p {&#10;    color: var(--text-secondary);&#10;    margin-bottom: var(--space-xl);&#10;    font-size: 1rem;&#10;}&#10;&#10;.quick-actions {&#10;    display: grid;&#10;    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));&#10;    gap: var(--space-md);&#10;    margin-top: var(--space-xl);&#10;}&#10;&#10;.quick-btn {&#10;    padding: var(--space-md) var(--space-lg);&#10;    background: var(--bg-secondary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-lg);&#10;    color: var(--text-primary);&#10;    cursor: pointer;&#10;    transition: var(--transition-normal);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-md);&#10;    text-align: left;&#10;}&#10;&#10;.quick-btn:hover {&#10;    background: var(--bg-hover);&#10;    border-color: var(--brand-primary);&#10;    transform: translateY(-2px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.quick-btn i {&#10;    font-size: 1.25rem;&#10;    color: var(--brand-primary);&#10;}&#10;&#10;.quick-btn span {&#10;    font-weight: 500;&#10;}&#10;&#10;/* 消息气泡 */&#10;.message {&#10;    display: flex;&#10;    margin-bottom: var(--space-lg);&#10;    animation: messageSlide 0.3s ease-out;&#10;}&#10;&#10;@keyframes messageSlide {&#10;    from {&#10;        opacity: 0;&#10;        transform: translateY(10px);&#10;    }&#10;    to {&#10;        opacity: 1;&#10;        transform: translateY(0);&#10;    }&#10;}&#10;&#10;.message.user {&#10;    justify-content: flex-end;&#10;}&#10;&#10;.message-avatar {&#10;    width: 36px;&#10;    height: 36px;&#10;    border-radius: 50%;&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    font-size: 14px;&#10;    flex-shrink: 0;&#10;    margin-right: var(--space-md);&#10;}&#10;&#10;.message.user .message-avatar {&#10;    background: var(--brand-gradient);&#10;    color: white;&#10;    order: 2;&#10;    margin-right: 0;&#10;    margin-left: var(--space-md);&#10;}&#10;&#10;.message.assistant .message-avatar {&#10;    background: var(--bg-tertiary);&#10;    color: var(--text-secondary);&#10;    border: 1px solid var(--border-primary);&#10;}&#10;&#10;.message-content {&#10;    max-width: 70%;&#10;    position: relative;&#10;}&#10;&#10;.message-bubble {&#10;    padding: var(--space-md) var(--space-lg);&#10;    border-radius: var(--radius-xl);&#10;    font-size: 0.9rem;&#10;    line-height: 1.6;&#10;    word-wrap: break-word;&#10;    position: relative;&#10;}&#10;&#10;.message.user .message-bubble {&#10;    background: var(--brand-gradient);&#10;    color: white;&#10;    border-bottom-right-radius: var(--radius-md);&#10;}&#10;&#10;.message.assistant .message-bubble {&#10;    background: var(--bg-secondary);&#10;    color: var(--text-primary);&#10;    border: 1px solid var(--border-primary);&#10;    border-bottom-left-radius: var(--radius-md);&#10;}&#10;&#10;.message-time {&#10;    font-size: 0.75rem;&#10;    color: var(--text-muted);&#10;    margin-top: var(--space-xs);&#10;    text-align: center;&#10;}&#10;&#10;.message.user .message-time {&#10;    text-align: right;&#10;}&#10;&#10;.message.assistant .message-time {&#10;    text-align: left;&#10;}&#10;&#10;/* 输入区域 */&#10;.chat-input-area {&#10;    padding: var(--space-lg);&#10;    border-top: 1px solid var(--border-primary);&#10;    background: var(--bg-secondary);&#10;    backdrop-filter: blur(10px);&#10;}&#10;&#10;.input-container {&#10;    max-width: 100%;&#10;}&#10;&#10;.input-wrapper {&#10;    display: flex;&#10;    align-items: flex-end;&#10;    background: var(--bg-tertiary);&#10;    border: 2px solid var(--border-primary);&#10;    border-radius: var(--radius-xl);&#10;    padding: var(--space-md);&#10;    transition: var(--transition-fast);&#10;    position: relative;&#10;}&#10;&#10;.input-wrapper:focus-within {&#10;    border-color: var(--brand-primary);&#10;    box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.1);&#10;}&#10;&#10;.input-actions-left,&#10;.input-actions-right {&#10;    display: flex;&#10;    gap: var(--space-xs);&#10;}&#10;&#10;.input-actions-left {&#10;    margin-right: var(--space-md);&#10;}&#10;&#10;.input-actions-right {&#10;    margin-left: var(--space-md);&#10;}&#10;&#10;#messageInput {&#10;    flex: 1;&#10;    border: none;&#10;    background: none;&#10;    outline: none;&#10;    resize: none;&#10;    font-size: 0.9rem;&#10;    line-height: 1.5;&#10;    font-family: inherit;&#10;    color: var(--text-primary);&#10;    min-height: 24px;&#10;    max-height: 120px;&#10;}&#10;&#10;#messageInput::placeholder {&#10;    color: var(--text-muted);&#10;}&#10;&#10;.input-actions-left .action-btn,&#10;.input-actions-right .action-btn {&#10;    width: 36px;&#10;    height: 36px;&#10;    border-radius: var(--radius-md);&#10;}&#10;&#10;.send-btn {&#10;    background: var(--brand-gradient);&#10;    color: white;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;.send-btn:hover {&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.send-btn:disabled {&#10;    opacity: 0.5;&#10;    cursor: not-allowed;&#10;    transform: none;&#10;    box-shadow: none;&#10;}&#10;&#10;.voice-btn.recording {&#10;    background: var(--error);&#10;    color: white;&#10;    animation: recordingPulse 1s infinite;&#10;}&#10;&#10;@keyframes recordingPulse {&#10;    0%, 100% { transform: scale(1); }&#10;    50% { transform: scale(1.1); }&#10;}&#10;&#10;.input-footer {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    margin-top: var(--space-md);&#10;    font-size: 0.75rem;&#10;}&#10;&#10;.char-count {&#10;    color: var(--text-muted);&#10;    font-weight: 500;&#10;}&#10;&#10;.char-count.warning {&#10;    color: var(--warning);&#10;}&#10;&#10;.char-count.error {&#10;    color: var(--error);&#10;}&#10;&#10;.input-hints {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-sm);&#10;    color: var(--text-muted);&#10;}&#10;&#10;.divider {&#10;    opacity: 0.5;&#10;}&#10;&#10;/* 聊天信息面板 */&#10;.chat-info-panel {&#10;    position: fixed;&#10;    top: 0;&#10;    right: -350px;&#10;    width: 350px;&#10;    height: 100vh;&#10;    background: var(--bg-secondary);&#10;    border-left: 1px solid var(--border-primary);&#10;    transition: var(--transition-normal);&#10;    z-index: 200;&#10;    display: flex;&#10;    flex-direction: column;&#10;}&#10;&#10;.chat-info-panel.open {&#10;    right: 0;&#10;}&#10;&#10;.panel-header {&#10;    padding: var(--space-lg);&#10;    border-bottom: 1px solid var(--border-primary);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: space-between;&#10;}&#10;&#10;.panel-header h3 {&#10;    font-size: 1.125rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;}&#10;&#10;.close-btn {&#10;    width: 32px;&#10;    height: 32px;&#10;    background: none;&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-secondary);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;}&#10;&#10;.close-btn:hover {&#10;    background: var(--bg-hover);&#10;    color: var(--text-primary);&#10;}&#10;&#10;.panel-content {&#10;    flex: 1;&#10;    overflow-y: auto;&#10;    padding: var(--space-lg);&#10;}&#10;&#10;.info-section {&#10;    margin-bottom: var(--space-xl);&#10;}&#10;&#10;.info-section h4 {&#10;    font-size: 1rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;    margin-bottom: var(--space-md);&#10;}&#10;&#10;.info-item {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--space-sm) 0;&#10;    border-bottom: 1px solid var(--border-primary);&#10;}&#10;&#10;.info-item:last-child {&#10;    border-bottom: none;&#10;}&#10;&#10;.info-item .label {&#10;    font-size: 0.875rem;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.info-item .value {&#10;    font-size: 0.875rem;&#10;    color: var(--text-primary);&#10;    font-weight: 500;&#10;}&#10;&#10;.model-info {&#10;    background: var(--bg-tertiary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-lg);&#10;    padding: var(--space-md);&#10;    text-align: center;&#10;}&#10;&#10;.model-name {&#10;    font-size: 1rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;    margin-bottom: var(--space-xs);&#10;}&#10;&#10;.model-provider {&#10;    font-size: 0.875rem;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;/* 打字指示器 */&#10;.typing-indicator {&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-md);&#10;    padding: var(--space-md) var(--space-lg);&#10;    background: var(--bg-secondary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-xl);&#10;    border-bottom-left-radius: var(--radius-md);&#10;    max-width: 70%;&#10;    font-size: 0.875rem;&#10;    color: var(--text-secondary);&#10;}&#10;&#10;.typing-dots {&#10;    display: flex;&#10;    gap: var(--space-xs);&#10;}&#10;&#10;.typing-dot {&#10;    width: 8px;&#10;    height: 8px;&#10;    background: var(--text-muted);&#10;    border-radius: 50%;&#10;    animation: typing 1.4s infinite ease-in-out;&#10;}&#10;&#10;.typing-dot:nth-child(1) { animation-delay: -0.32s; }&#10;.typing-dot:nth-child(2) { animation-delay: -0.16s; }&#10;&#10;@keyframes typing {&#10;    0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }&#10;    40% { opacity: 1; transform: scale(1); }&#10;}&#10;&#10;/* 模态框 */&#10;.modal-overlay {&#10;    position: fixed;&#10;    top: 0;&#10;    left: 0;&#10;    width: 100%;&#10;    height: 100%;&#10;    background: rgba(0, 0, 0, 0.8);&#10;    backdrop-filter: blur(8px);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    z-index: 1000;&#10;    opacity: 0;&#10;    visibility: hidden;&#10;    transition: var(--transition-normal);&#10;}&#10;&#10;.modal-overlay.show {&#10;    opacity: 1;&#10;    visibility: visible;&#10;}&#10;&#10;.modal {&#10;    background: var(--bg-secondary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-xl);&#10;    box-shadow: var(--shadow-xl);&#10;    max-width: 500px;&#10;    width: 90%;&#10;    max-height: 80vh;&#10;    overflow: hidden;&#10;    transform: scale(0.9) translateY(20px);&#10;    transition: var(--transition-normal);&#10;}&#10;&#10;.modal-overlay.show .modal {&#10;    transform: scale(1) translateY(0);&#10;}&#10;&#10;.modal-header {&#10;    padding: var(--space-lg);&#10;    border-bottom: 1px solid var(--border-primary);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: space-between;&#10;    background: var(--bg-tertiary);&#10;}&#10;&#10;.modal-header h3 {&#10;    font-size: 1.25rem;&#10;    font-weight: 600;&#10;    color: var(--text-primary);&#10;}&#10;&#10;.modal-content {&#10;    padding: var(--space-lg);&#10;    overflow-y: auto;&#10;}&#10;&#10;/* 个人资料模态框 */&#10;.avatar-section {&#10;    text-align: center;&#10;    margin-bottom: var(--space-xl);&#10;}&#10;&#10;.avatar-preview {&#10;    position: relative;&#10;    display: inline-block;&#10;    margin-bottom: var(--space-md);&#10;}&#10;&#10;.avatar-preview .avatar-img {&#10;    width: 100px;&#10;    height: 100px;&#10;    border-radius: 50%;&#10;    object-fit: cover;&#10;    border: 4px solid var(--border-primary);&#10;}&#10;&#10;.avatar-change-btn {&#10;    position: absolute;&#10;    bottom: 0;&#10;    right: 0;&#10;    width: 36px;&#10;    height: 36px;&#10;    background: var(--brand-primary);&#10;    color: white;&#10;    border: none;&#10;    border-radius: 50%;&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    display: flex;&#10;    align-items: center;&#10;    justify-content: center;&#10;    border: 3px solid var(--bg-secondary);&#10;}&#10;&#10;.avatar-change-btn:hover {&#10;    background: var(--brand-secondary);&#10;    transform: scale(1.1);&#10;}&#10;&#10;.profile-form {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--space-lg);&#10;}&#10;&#10;.form-group {&#10;    display: flex;&#10;    flex-direction: column;&#10;    gap: var(--space-sm);&#10;}&#10;&#10;.form-group label {&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    color: var(--text-primary);&#10;}&#10;&#10;.form-group input,&#10;.form-group textarea {&#10;    padding: var(--space-md);&#10;    background: var(--bg-tertiary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-primary);&#10;    font-size: 0.875rem;&#10;    font-family: inherit;&#10;    outline: none;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;.form-group input:focus,&#10;.form-group textarea:focus {&#10;    border-color: var(--brand-primary);&#10;    box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.2);&#10;}&#10;&#10;.form-group input::placeholder,&#10;.form-group textarea::placeholder {&#10;    color: var(--text-muted);&#10;}&#10;&#10;.form-group input[readonly] {&#10;    background: var(--bg-hover);&#10;    color: var(--text-muted);&#10;    cursor: not-allowed;&#10;}&#10;&#10;.form-group textarea {&#10;    resize: vertical;&#10;    min-height: 80px;&#10;}&#10;&#10;/* 设置模态框 */&#10;.settings-modal {&#10;    max-width: 600px;&#10;}&#10;&#10;.settings-tabs {&#10;    display: flex;&#10;    border-bottom: 1px solid var(--border-primary);&#10;    margin-bottom: var(--space-lg);&#10;}&#10;&#10;.tab-btn {&#10;    padding: var(--space-md) var(--space-lg);&#10;    background: none;&#10;    border: none;&#10;    border-bottom: 2px solid transparent;&#10;    color: var(--text-secondary);&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;}&#10;&#10;.tab-btn:hover {&#10;    color: var(--text-primary);&#10;}&#10;&#10;.tab-btn.active {&#10;    color: var(--brand-primary);&#10;    border-bottom-color: var(--brand-primary);&#10;}&#10;&#10;.tab-content {&#10;    display: none;&#10;}&#10;&#10;.tab-content.active {&#10;    display: block;&#10;}&#10;&#10;.setting-item {&#10;    display: flex;&#10;    justify-content: space-between;&#10;    align-items: center;&#10;    padding: var(--space-lg) 0;&#10;    border-bottom: 1px solid var(--border-primary);&#10;}&#10;&#10;.setting-item:last-child {&#10;    border-bottom: none;&#10;}&#10;&#10;.setting-item label {&#10;    font-size: 0.875rem;&#10;    font-weight: 500;&#10;    color: var(--text-primary);&#10;}&#10;&#10;.setting-item select {&#10;    padding: var(--space-sm) var(--space-md);&#10;    background: var(--bg-tertiary);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: var(--radius-md);&#10;    color: var(--text-primary);&#10;    font-size: 0.875rem;&#10;    outline: none;&#10;    cursor: pointer;&#10;}&#10;&#10;/* 开关组件 */&#10;.switch {&#10;    position: relative;&#10;    width: 50px;&#10;    height: 28px;&#10;}&#10;&#10;.switch input {&#10;    opacity: 0;&#10;    width: 0;&#10;    height: 0;&#10;}&#10;&#10;.slider {&#10;    position: absolute;&#10;    cursor: pointer;&#10;    top: 0;&#10;    left: 0;&#10;    right: 0;&#10;    bottom: 0;&#10;    background: var(--bg-hover);&#10;    border: 1px solid var(--border-primary);&#10;    border-radius: 14px;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;.slider:before {&#10;    position: absolute;&#10;    content: &quot;&quot;;&#10;    height: 20px;&#10;    width: 20px;&#10;    left: 3px;&#10;    bottom: 3px;&#10;    background: var(--text-primary);&#10;    border-radius: 50%;&#10;    transition: var(--transition-fast);&#10;}&#10;&#10;input:checked + .slider {&#10;    background: var(--brand-primary);&#10;    border-color: var(--brand-primary);&#10;}&#10;&#10;input:checked + .slider:before {&#10;    transform: translateX(22px);&#10;    background: white;&#10;}&#10;&#10;/* 按钮 */&#10;.modal-actions {&#10;    display: flex;&#10;    gap: var(--space-md);&#10;    margin-top: var(--space-xl);&#10;    justify-content: flex-end;&#10;}&#10;&#10;.btn {&#10;    padding: var(--space-md) var(--space-xl);&#10;    border: none;&#10;    border-radius: var(--radius-md);&#10;    font-size: 0.875rem;&#10;    font-weight: 600;&#10;    cursor: pointer;&#10;    transition: var(--transition-fast);&#10;    display: flex;&#10;    align-items: center;&#10;    gap: var(--space-sm);&#10;}&#10;&#10;.btn.primary {&#10;    background: var(--brand-gradient);&#10;    color: white;&#10;}&#10;&#10;.btn.primary:hover {&#10;    transform: translateY(-1px);&#10;    box-shadow: var(--shadow-md);&#10;}&#10;&#10;.btn.secondary {&#10;    background: var(--bg-hover);&#10;    color: var(--text-primary);&#10;    border: 1px solid var(--border-primary);&#10;}&#10;&#10;.btn.secondary:hover {&#10;    background: var(--bg-active);&#10;    border-color: var(--border-muted);&#10;}&#10;&#10;/* 响应式设计 */&#10;@media (max-width: 1200px) {&#10;    .chat-info-panel {&#10;        width: 300px;&#10;        right: -300px;&#10;    }&#10;}&#10;&#10;@media (max-width: 1024px) {&#10;    .sidebar {&#10;        width: 280px;&#10;    }&#10;    &#10;    .quick-actions {&#10;        grid-template-columns: 1fr;&#10;    }&#10;}&#10;&#10;@media (max-width: 768px) {&#10;    .sidebar {&#10;        position: fixed;&#10;        left: -320px;&#10;        z-index: 150;&#10;        box-shadow: var(--shadow-xl);&#10;    }&#10;    &#10;    .sidebar.open {&#10;        left: 0;&#10;    }&#10;    &#10;    .main-content {&#10;        width: 100%;&#10;    }&#10;    &#10;    .sidebar-toggle {&#10;        display: flex;&#10;    }&#10;    &#10;    .chat-header {&#10;        padding: var(--space-md);&#10;    }&#10;    &#10;    .chat-messages {&#10;        padding: var(--space-md);&#10;    }&#10;    &#10;    .chat-input-area {&#10;        padding: var(--space-md);&#10;    }&#10;    &#10;    .message-content {&#10;        max-width: 85%;&#10;    }&#10;    &#10;    .modal {&#10;        width: 95%;&#10;        margin: var(--space-md);&#10;    }&#10;    &#10;    .quick-actions {&#10;        grid-template-columns: 1fr;&#10;        gap: var(--space-sm);&#10;    }&#10;    &#10;    .quick-btn {&#10;        padding: var(--space-sm) var(--space-md);&#10;    }&#10;}&#10;&#10;@media (max-width: 480px) {&#10;    .input-actions-left,&#10;    .input-actions-right {&#10;        flex-direction: column;&#10;        gap: var(--space-xs);&#10;    }&#10;    &#10;    .input-wrapper {&#10;        padding: var(--space-sm);&#10;    }&#10;    &#10;    .message-content {&#10;        max-width: 90%;&#10;    }&#10;    &#10;    .welcome-section {&#10;        padding: var(--space-lg) var(--space-sm);&#10;    }&#10;    &#10;    .ai-avatar {&#10;        width: 60px;&#10;        height: 60px;&#10;        font-size: 1.5rem;&#10;    }&#10;    &#10;    .input-hints {&#10;        flex-direction: column;&#10;        align-items: flex-start;&#10;        gap: var(--space-xs);&#10;    }&#10;}&#10;&#10;/* 深色主题滚动条全局样式 */&#10;::-webkit-scrollbar {&#10;    width: 8px;&#10;    height: 8px;&#10;}&#10;&#10;::-webkit-scrollbar-track {&#10;    background: var(--bg-secondary);&#10;}&#10;&#10;::-webkit-scrollbar-thumb {&#10;    background: var(--border-muted);&#10;    border-radius: 4px;&#10;}&#10;&#10;::-webkit-scrollbar-thumb:hover {&#10;    background: var(--text-muted);&#10;}&#10;&#10;::-webkit-scrollbar-corner {&#10;    background: var(--bg-secondary);&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/js/auth.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/js/auth.js" />
              <option name="originalContent" value="// 认证相关JavaScript功能&#10;class AuthManager {&#10;    constructor() {&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        this.bindEvents();&#10;        this.setupFormValidation();&#10;    }&#10;&#10;    bindEvents() {&#10;        // 登录表单提交&#10;        const loginForm = document.getElementById('loginForm');&#10;        if (loginForm) {&#10;            loginForm.addEventListener('submit', (e) =&gt; this.handleLogin(e));&#10;        }&#10;&#10;        // 注册表单提交&#10;        const registerForm = document.getElementById('registerForm');&#10;        if (registerForm) {&#10;            registerForm.addEventListener('submit', (e) =&gt; this.handleRegister(e));&#10;        }&#10;&#10;        // 实时验证&#10;        this.setupRealTimeValidation();&#10;    }&#10;&#10;    setupRealTimeValidation() {&#10;        const inputs = document.querySelectorAll('.premium-input');&#10;        inputs.forEach(input =&gt; {&#10;            input.addEventListener('blur', () =&gt; this.validateField(input));&#10;            input.addEventListener('input', () =&gt; this.clearValidation(input));&#10;        });&#10;&#10;        // 密码确认验证&#10;        const confirmPassword = document.getElementById('confirmPassword');&#10;        if (confirmPassword) {&#10;            confirmPassword.addEventListener('input', () =&gt; this.validatePasswordMatch());&#10;        }&#10;    }&#10;&#10;    setupFormValidation() {&#10;        // 设置输入框焦点效果&#10;        const inputs = document.querySelectorAll('.premium-input');&#10;        inputs.forEach(input =&gt; {&#10;            input.addEventListener('focus', function() {&#10;                this.parentElement.classList.add('focused');&#10;            });&#10;&#10;            input.addEventListener('blur', function() {&#10;                if (!this.value) {&#10;                    this.parentElement.classList.remove('focused');&#10;                }&#10;            });&#10;&#10;            // 如果输入框有值，保持焦点状态&#10;            if (input.value) {&#10;                input.parentElement.classList.add('focused');&#10;            }&#10;        });&#10;    }&#10;&#10;    async handleLogin(e) {&#10;        e.preventDefault();&#10;&#10;        const form = e.target;&#10;        const submitBtn = form.querySelector('.premium-btn');&#10;        const username = form.username.value.trim();&#10;        const password = form.password.value;&#10;        const rememberMe = form.rememberMe?.checked || false;&#10;&#10;        // 验证输入&#10;        if (!this.validateLoginForm(username, password)) {&#10;            return;&#10;        }&#10;&#10;        // 显示加载状态&#10;        this.setButtonLoading(submitBtn, true);&#10;&#10;        try {&#10;            const response = await fetch('/api/login', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify({&#10;                    username: username,&#10;                    password: password,&#10;                    rememberMe: rememberMe&#10;                })&#10;            });&#10;&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                // 保存用户信息&#10;                this.saveUserSession(result, rememberMe);&#10;&#10;                // 显示成功消息&#10;                this.showMessage('登录成功！正在跳转...', 'success');&#10;&#10;                // 延迟跳转到聊天页面&#10;                setTimeout(() =&gt; {&#10;                    window.location.href = '/chat.html';&#10;                }, 1500);&#10;            } else {&#10;                this.showMessage(result.message || '登录失败，请检查用户名和密码', 'error');&#10;            }&#10;        } catch (error) {&#10;            console.error('登录错误:', error);&#10;            this.showMessage('网络错误，请稍后重试', 'error');&#10;        } finally {&#10;            this.setButtonLoading(submitBtn, false);&#10;        }&#10;    }&#10;&#10;    async handleRegister(e) {&#10;        e.preventDefault();&#10;&#10;        const form = e.target;&#10;        const submitBtn = form.querySelector('.premium-btn');&#10;        const username = form.username.value.trim();&#10;        const email = form.email.value.trim();&#10;        const password = form.password.value;&#10;        const confirmPassword = form.confirmPassword.value;&#10;        const agreeTerms = form.agreeTerms.checked;&#10;&#10;        // 验证输入&#10;        if (!this.validateRegisterForm(username, email, password, confirmPassword, agreeTerms)) {&#10;            return;&#10;        }&#10;&#10;        // 显示加载状态&#10;        this.setButtonLoading(submitBtn, true);&#10;&#10;        try {&#10;            const response = await fetch('/api/register', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify({&#10;                    username: username,&#10;                    email: email,&#10;                    password: password&#10;                })&#10;            });&#10;&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                // 显示成功消息&#10;                this.showMessage('注册成功！请登录您的账户', 'success');&#10;&#10;                // 延迟跳转到登录页面&#10;                setTimeout(() =&gt; {&#10;                    window.location.href = '/login.html';&#10;                }, 2000);&#10;            } else {&#10;                this.showMessage(result.message || '注册失败，请稍后重试', 'error');&#10;            }&#10;        } catch (error) {&#10;            console.error('注册错误:', error);&#10;            this.showMessage('网络错误，请稍后重试', 'error');&#10;        } finally {&#10;            this.setButtonLoading(submitBtn, false);&#10;        }&#10;    }&#10;&#10;    validateLoginForm(username, password) {&#10;        let isValid = true;&#10;&#10;        if (!username) {&#10;            this.showFieldError('username', '请输入用户名');&#10;            isValid = false;&#10;        }&#10;&#10;        if (!password) {&#10;            this.showFieldError('password', '请输入密码');&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;&#10;    validateRegisterForm(username, email, password, confirmPassword, agreeTerms) {&#10;        let isValid = true;&#10;&#10;        // 验证用户名&#10;        if (!username) {&#10;            this.showFieldError('username', '请输入用户名');&#10;            isValid = false;&#10;        } else if (!/^[a-zA-Z0-9_]{3,20}$/.test(username)) {&#10;            this.showFieldError('username', '用户名只能包含字母、数字和下划线，长度3-20位');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证邮箱&#10;        if (!email) {&#10;            this.showFieldError('email', '请输入邮箱地址');&#10;            isValid = false;&#10;        } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {&#10;            this.showFieldError('email', '请输入有效的邮箱地址');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证密码&#10;        if (!password) {&#10;            this.showFieldError('password', '请输入密码');&#10;            isValid = false;&#10;        } else if (password.length &lt; 6) {&#10;            this.showFieldError('password', '密码长度至少6位');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证确认密码&#10;        if (!confirmPassword) {&#10;            this.showFieldError('confirmPassword', '请确认密码');&#10;            isValid = false;&#10;        } else if (password !== confirmPassword) {&#10;            this.showFieldError('confirmPassword', '两次输入的密码不一致');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证服务条款&#10;        if (!agreeTerms) {&#10;            this.showMessage('请同意服务条款和隐私政策', 'error');&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;&#10;    validateField(input) {&#10;        const fieldName = input.name;&#10;        const value = input.value.trim();&#10;&#10;        switch (fieldName) {&#10;            case 'username':&#10;                if (!value) {&#10;                    this.showFieldError(fieldName, '请输入用户名');&#10;                } else if (!/^[a-zA-Z0-9_]{3,20}$/.test(value)) {&#10;                    this.showFieldError(fieldName, '用户名只能包含字母、数字和下划线，长度3-20位');&#10;                } else {&#10;                    this.clearFieldError(fieldName);&#10;                }&#10;                break;&#10;            case 'email':&#10;                if (!value) {&#10;                    this.showFieldError(fieldName, '请输入邮箱地址');&#10;                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {&#10;                    this.showFieldError(fieldName, '请输入有效的邮箱地址');&#10;                } else {&#10;                    this.clearFieldError(fieldName);&#10;                }&#10;                break;&#10;            case 'password':&#10;                if (!value) {&#10;                    this.showFieldError(fieldName, '请输入密码');&#10;                } else if (value.length &lt; 6) {&#10;                    this.showFieldError(fieldName, '密码长度至少6位');&#10;                } else {&#10;                    this.clearFieldError(fieldName);&#10;                }&#10;                break;&#10;        }&#10;    }&#10;&#10;    validatePasswordMatch() {&#10;        const password = document.getElementById('password')?.value;&#10;        const confirmPassword = document.getElementById('confirmPassword')?.value;&#10;&#10;        if (confirmPassword &amp;&amp; password !== confirmPassword) {&#10;            this.showFieldError('confirmPassword', '两次输入的密码不一致');&#10;        } else if (confirmPassword) {&#10;            this.clearFieldError('confirmPassword');&#10;        }&#10;    }&#10;&#10;    clearValidation(input) {&#10;        this.clearFieldError(input.name);&#10;    }&#10;&#10;    showFieldError(fieldName, message) {&#10;        const feedbackElement = document.getElementById(`${fieldName}-feedback`);&#10;        const inputContainer = document.getElementById(fieldName)?.parentElement;&#10;&#10;        if (feedbackElement) {&#10;            feedbackElement.textContent = message;&#10;            feedbackElement.style.display = 'block';&#10;        }&#10;&#10;        if (inputContainer) {&#10;            inputContainer.classList.add('error');&#10;        }&#10;    }&#10;&#10;    clearFieldError(fieldName) {&#10;        const feedbackElement = document.getElementById(`${fieldName}-feedback`);&#10;        const inputContainer = document.getElementById(fieldName)?.parentElement;&#10;&#10;        if (feedbackElement) {&#10;            feedbackElement.textContent = '';&#10;            feedbackElement.style.display = 'none';&#10;        }&#10;&#10;        if (inputContainer) {&#10;            inputContainer.classList.remove('error');&#10;        }&#10;    }&#10;&#10;    setButtonLoading(button, loading) {&#10;        if (loading) {&#10;            button.classList.add('loading');&#10;            button.disabled = true;&#10;        } else {&#10;            button.classList.remove('loading');&#10;            button.disabled = false;&#10;        }&#10;    }&#10;&#10;    showMessage(message, type = 'info') {&#10;        // 移除现有的消息&#10;        const existingMessage = document.querySelector('.auth-message');&#10;        if (existingMessage) {&#10;            existingMessage.remove();&#10;        }&#10;&#10;        // 创建新消息&#10;        const messageDiv = document.createElement('div');&#10;        messageDiv.className = `auth-message ${type}`;&#10;        messageDiv.innerHTML = `&#10;            &lt;div class=&quot;message-content&quot;&gt;&#10;                &lt;i class=&quot;fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}&quot;&gt;&lt;/i&gt;&#10;                &lt;span&gt;${message}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        // 插入到表单前面&#10;        const formSection = document.querySelector('.form-section');&#10;        if (formSection) {&#10;            formSection.insertBefore(messageDiv, formSection.firstChild);&#10;        }&#10;&#10;        // 自动移除消息&#10;        setTimeout(() =&gt; {&#10;            if (messageDiv.parentNode) {&#10;                messageDiv.remove();&#10;            }&#10;        }, 5000);&#10;    }&#10;&#10;    saveUserSession(userData, rememberMe) {&#10;        const storage = rememberMe ? localStorage : sessionStorage;&#10;        storage.setItem('userInfo', JSON.stringify({&#10;            username: userData.username,&#10;            email: userData.email,&#10;            loginTime: new Date().toISOString()&#10;        }));&#10;    }&#10;&#10;    getUserSession() {&#10;        const sessionData = sessionStorage.getItem('userInfo') || localStorage.getItem('userInfo');&#10;        return sessionData ? JSON.parse(sessionData) : null;&#10;    }&#10;&#10;    clearUserSession() {&#10;        sessionStorage.removeItem('userInfo');&#10;        localStorage.removeItem('userInfo');&#10;    }&#10;}&#10;&#10;// 密码显示切换功能&#10;function togglePassword(inputId) {&#10;    const input = document.getElementById(inputId);&#10;    const toggleBtn = input.nextElementSibling;&#10;    const icon = toggleBtn.querySelector('i');&#10;&#10;    if (input.type === 'password') {&#10;        input.type = 'text';&#10;        icon.classList.remove('fa-eye');&#10;        icon.classList.add('fa-eye-slash');&#10;    } else {&#10;        input.type = 'password';&#10;        icon.classList.remove('fa-eye-slash');&#10;        icon.classList.add('fa-eye');&#10;    }&#10;}&#10;&#10;// 社交登录功能&#10;function socialLogin(provider) {&#10;    // 这里可以实现第三方登录逻辑&#10;    console.log(`正在使用 ${provider} 登录...`);&#10;    // 实际项目中需要接入相应的第三方登录SDK&#10;}&#10;&#10;// 页面加载完成后初始化&#10;document.addEventListener('DOMContentLoaded', () =&gt; {&#10;    new AuthManager();&#10;});&#10;" />
              <option name="updatedContent" value="// 认证相关JavaScript功能&#10;class AuthManager {&#10;    constructor() {&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        this.bindEvents();&#10;        this.setupFormValidation();&#10;    }&#10;&#10;    bindEvents() {&#10;        // 登录表单提交&#10;        const loginForm = document.getElementById('loginForm');&#10;        if (loginForm) {&#10;            loginForm.addEventListener('submit', (e) =&gt; this.handleLogin(e));&#10;        }&#10;&#10;        // 注册表单提交&#10;        const registerForm = document.getElementById('registerForm');&#10;        if (registerForm) {&#10;            registerForm.addEventListener('submit', (e) =&gt; this.handleRegister(e));&#10;        }&#10;&#10;        // 实时验证&#10;        this.setupRealTimeValidation();&#10;    }&#10;&#10;    setupRealTimeValidation() {&#10;        const inputs = document.querySelectorAll('.premium-input');&#10;        inputs.forEach(input =&gt; {&#10;            input.addEventListener('blur', () =&gt; this.validateField(input));&#10;            input.addEventListener('input', () =&gt; this.clearValidation(input));&#10;        });&#10;&#10;        // 密码确认验证&#10;        const confirmPassword = document.getElementById('confirmPassword');&#10;        if (confirmPassword) {&#10;            confirmPassword.addEventListener('input', () =&gt; this.validatePasswordMatch());&#10;        }&#10;    }&#10;&#10;    setupFormValidation() {&#10;        // 设置输入框焦点效果&#10;        const inputs = document.querySelectorAll('.premium-input');&#10;        inputs.forEach(input =&gt; {&#10;            input.addEventListener('focus', function() {&#10;                this.parentElement.classList.add('focused');&#10;            });&#10;&#10;            input.addEventListener('blur', function() {&#10;                if (!this.value) {&#10;                    this.parentElement.classList.remove('focused');&#10;                }&#10;            });&#10;&#10;            // 如果输入框有值，保持焦点状态&#10;            if (input.value) {&#10;                input.parentElement.classList.add('focused');&#10;            }&#10;        });&#10;    }&#10;&#10;    async handleLogin(e) {&#10;        e.preventDefault();&#10;        &#10;        const form = e.target;&#10;        const submitBtn = form.querySelector('.premium-btn');&#10;        const username = form.username.value.trim();&#10;        const password = form.password.value;&#10;        const rememberMe = form.rememberMe?.checked || false;&#10;&#10;        // 验证输入&#10;        if (!this.validateLoginForm(username, password)) {&#10;            return;&#10;        }&#10;&#10;        // 显示加载状态&#10;        this.setButtonLoading(submitBtn, true);&#10;&#10;        try {&#10;            const response = await fetch('/api/login', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify({&#10;                    username: username,&#10;                    password: password,&#10;                    rememberMe: rememberMe&#10;                })&#10;            });&#10;&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                // 保存用户信息&#10;                this.saveUserSession(result, rememberMe);&#10;                &#10;                // 显示成功消息&#10;                this.showMessage('登录成功！正在跳转...', 'success');&#10;                &#10;                // 延迟跳转到聊天页面&#10;                setTimeout(() =&gt; {&#10;                    window.location.href = '/chat';&#10;                }, 1500);&#10;            } else {&#10;                this.showMessage(result.message || '登录失败，请检查用户名和密码', 'error');&#10;            }&#10;        } catch (error) {&#10;            console.error('登录错误:', error);&#10;            this.showMessage('网络错误，请稍后重试', 'error');&#10;        } finally {&#10;            this.setButtonLoading(submitBtn, false);&#10;        }&#10;    }&#10;&#10;    async handleRegister(e) {&#10;        e.preventDefault();&#10;        &#10;        const form = e.target;&#10;        const submitBtn = form.querySelector('.premium-btn');&#10;        const username = form.username.value.trim();&#10;        const email = form.email.value.trim();&#10;        const password = form.password.value;&#10;        const confirmPassword = form.confirmPassword.value;&#10;        const agreeTerms = form.agreeTerms.checked;&#10;&#10;        // 验证输入&#10;        if (!this.validateRegisterForm(username, email, password, confirmPassword, agreeTerms)) {&#10;            return;&#10;        }&#10;&#10;        // 显示加载状态&#10;        this.setButtonLoading(submitBtn, true);&#10;&#10;        try {&#10;            const response = await fetch('/api/register', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify({&#10;                    username: username,&#10;                    email: email,&#10;                    password: password&#10;                })&#10;            });&#10;&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                // 显示成功消息&#10;                this.showMessage('注册成功！请登录您的账户', 'success');&#10;                &#10;                // 延迟跳转到登录页面&#10;                setTimeout(() =&gt; {&#10;                    window.location.href = '/login';&#10;                }, 2000);&#10;            } else {&#10;                this.showMessage(result.message || '注册失败，请稍后重试', 'error');&#10;            }&#10;        } catch (error) {&#10;            console.error('注册错误:', error);&#10;            this.showMessage('网络错误，请稍后重试', 'error');&#10;        } finally {&#10;            this.setButtonLoading(submitBtn, false);&#10;        }&#10;    }&#10;&#10;    validateLoginForm(username, password) {&#10;        let isValid = true;&#10;&#10;        if (!username) {&#10;            this.showFieldError('username', '请输入用户名');&#10;            isValid = false;&#10;        }&#10;&#10;        if (!password) {&#10;            this.showFieldError('password', '请输入密码');&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;&#10;    validateRegisterForm(username, email, password, confirmPassword, agreeTerms) {&#10;        let isValid = true;&#10;&#10;        // 验证用户名&#10;        if (!username) {&#10;            this.showFieldError('username', '请输入用户名');&#10;            isValid = false;&#10;        } else if (!/^[a-zA-Z0-9_]{3,20}$/.test(username)) {&#10;            this.showFieldError('username', '用户名只能包含字母、数字和下划线，长度3-20位');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证邮箱&#10;        if (!email) {&#10;            this.showFieldError('email', '请输入邮箱地址');&#10;            isValid = false;&#10;        } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {&#10;            this.showFieldError('email', '请输入有效的邮箱地址');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证密码&#10;        if (!password) {&#10;            this.showFieldError('password', '请输入密码');&#10;            isValid = false;&#10;        } else if (password.length &lt; 6) {&#10;            this.showFieldError('password', '密码长度至少6位');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证确认密码&#10;        if (!confirmPassword) {&#10;            this.showFieldError('confirmPassword', '请确认密码');&#10;            isValid = false;&#10;        } else if (password !== confirmPassword) {&#10;            this.showFieldError('confirmPassword', '两次输入的密码不一致');&#10;            isValid = false;&#10;        }&#10;&#10;        // 验证服务条款&#10;        if (!agreeTerms) {&#10;            this.showMessage('请同意服务条款和隐私政策', 'error');&#10;            isValid = false;&#10;        }&#10;&#10;        return isValid;&#10;    }&#10;&#10;    validateField(input) {&#10;        const fieldName = input.name;&#10;        const value = input.value.trim();&#10;&#10;        switch (fieldName) {&#10;            case 'username':&#10;                if (!value) {&#10;                    this.showFieldError(fieldName, '请输入用户名');&#10;                } else if (!/^[a-zA-Z0-9_]{3,20}$/.test(value)) {&#10;                    this.showFieldError(fieldName, '用户名只能包含字母、数字和下划线，长度3-20位');&#10;                } else {&#10;                    this.clearFieldError(fieldName);&#10;                }&#10;                break;&#10;            case 'email':&#10;                if (!value) {&#10;                    this.showFieldError(fieldName, '请输入邮箱地址');&#10;                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {&#10;                    this.showFieldError(fieldName, '请输入有效的邮箱地址');&#10;                } else {&#10;                    this.clearFieldError(fieldName);&#10;                }&#10;                break;&#10;            case 'password':&#10;                if (!value) {&#10;                    this.showFieldError(fieldName, '请输入密码');&#10;                } else if (value.length &lt; 6) {&#10;                    this.showFieldError(fieldName, '密码长度至少6位');&#10;                } else {&#10;                    this.clearFieldError(fieldName);&#10;                }&#10;                break;&#10;        }&#10;    }&#10;&#10;    validatePasswordMatch() {&#10;        const password = document.getElementById('password')?.value;&#10;        const confirmPassword = document.getElementById('confirmPassword')?.value;&#10;&#10;        if (confirmPassword &amp;&amp; password !== confirmPassword) {&#10;            this.showFieldError('confirmPassword', '两次输入的密码不一致');&#10;        } else if (confirmPassword) {&#10;            this.clearFieldError('confirmPassword');&#10;        }&#10;    }&#10;&#10;    clearValidation(input) {&#10;        this.clearFieldError(input.name);&#10;    }&#10;&#10;    showFieldError(fieldName, message) {&#10;        const feedbackElement = document.getElementById(`${fieldName}-feedback`);&#10;        const inputContainer = document.getElementById(fieldName)?.parentElement;&#10;&#10;        if (feedbackElement) {&#10;            feedbackElement.textContent = message;&#10;            feedbackElement.style.display = 'block';&#10;        }&#10;&#10;        if (inputContainer) {&#10;            inputContainer.classList.add('error');&#10;        }&#10;    }&#10;&#10;    clearFieldError(fieldName) {&#10;        const feedbackElement = document.getElementById(`${fieldName}-feedback`);&#10;        const inputContainer = document.getElementById(fieldName)?.parentElement;&#10;&#10;        if (feedbackElement) {&#10;            feedbackElement.textContent = '';&#10;            feedbackElement.style.display = 'none';&#10;        }&#10;&#10;        if (inputContainer) {&#10;            inputContainer.classList.remove('error');&#10;        }&#10;    }&#10;&#10;    setButtonLoading(button, loading) {&#10;        if (loading) {&#10;            button.classList.add('loading');&#10;            button.disabled = true;&#10;        } else {&#10;            button.classList.remove('loading');&#10;            button.disabled = false;&#10;        }&#10;    }&#10;&#10;    showMessage(message, type = 'info') {&#10;        // 移除现有的消息&#10;        const existingMessage = document.querySelector('.auth-message');&#10;        if (existingMessage) {&#10;            existingMessage.remove();&#10;        }&#10;&#10;        // 创建新消息&#10;        const messageDiv = document.createElement('div');&#10;        messageDiv.className = `auth-message ${type}`;&#10;        messageDiv.innerHTML = `&#10;            &lt;div class=&quot;message-content&quot;&gt;&#10;                &lt;i class=&quot;fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}&quot;&gt;&lt;/i&gt;&#10;                &lt;span&gt;${message}&lt;/span&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        // 插入到表单前面&#10;        const formSection = document.querySelector('.form-section');&#10;        if (formSection) {&#10;            formSection.insertBefore(messageDiv, formSection.firstChild);&#10;        }&#10;&#10;        // 自动移除消息&#10;        setTimeout(() =&gt; {&#10;            if (messageDiv.parentNode) {&#10;                messageDiv.remove();&#10;            }&#10;        }, 5000);&#10;    }&#10;&#10;    saveUserSession(userData, rememberMe) {&#10;        const storage = rememberMe ? localStorage : sessionStorage;&#10;        storage.setItem('userInfo', JSON.stringify({&#10;            username: userData.username,&#10;            email: userData.email,&#10;            loginTime: new Date().toISOString()&#10;        }));&#10;    }&#10;&#10;    getUserSession() {&#10;        const sessionData = sessionStorage.getItem('userInfo') || localStorage.getItem('userInfo');&#10;        return sessionData ? JSON.parse(sessionData) : null;&#10;    }&#10;&#10;    clearUserSession() {&#10;        sessionStorage.removeItem('userInfo');&#10;        localStorage.removeItem('userInfo');&#10;    }&#10;}&#10;&#10;// 密码显示切换功能&#10;function togglePassword(inputId) {&#10;    const input = document.getElementById(inputId);&#10;    const toggleBtn = input.nextElementSibling;&#10;    const icon = toggleBtn.querySelector('i');&#10;&#10;    if (input.type === 'password') {&#10;        input.type = 'text';&#10;        icon.classList.remove('fa-eye');&#10;        icon.classList.add('fa-eye-slash');&#10;    } else {&#10;        input.type = 'password';&#10;        icon.classList.remove('fa-eye-slash');&#10;        icon.classList.add('fa-eye');&#10;    }&#10;}&#10;&#10;// 社交登录功能&#10;function socialLogin(provider) {&#10;    // 这里可以实现第三方登录逻辑&#10;    console.log(`正在使用 ${provider} 登录...`);&#10;    // 实际项目中需要接入相应的第三方登录SDK&#10;}&#10;&#10;// 页面加载完成后初始化&#10;document.addEventListener('DOMContentLoaded', () =&gt; {&#10;    new AuthManager();&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/js/chat.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/alibaba-deepseek-demo/src/main/resources/static/js/chat.js" />
              <option name="originalContent" value="// AI聊天室JavaScript功能&#10;class ChatManager {&#10;    constructor() {&#10;        this.currentChatId = null;&#10;        this.chatHistory = [];&#10;        this.isTyping = false;&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        this.checkAuth();&#10;        this.bindEvents();&#10;        this.loadUserInfo();&#10;        this.setupAutoResize();&#10;    }&#10;&#10;    checkAuth() {&#10;        const userInfo = this.getUserSession();&#10;        if (!userInfo) {&#10;            window.location.href = '/login';&#10;            return;&#10;        }&#10;    }&#10;&#10;    getUserSession() {&#10;        const sessionData = sessionStorage.getItem('userInfo') || localStorage.getItem('userInfo');&#10;        return sessionData ? JSON.parse(sessionData) : null;&#10;    }&#10;&#10;    loadUserInfo() {&#10;        const userInfo = this.getUserSession();&#10;        if (userInfo) {&#10;            document.getElementById('displayUsername').textContent = userInfo.username;&#10;            document.getElementById('displayEmail').textContent = userInfo.email || '';&#10;        }&#10;    }&#10;&#10;    bindEvents() {&#10;        // 发送消息事件&#10;        const sendBtn = document.querySelector('.send-btn');&#10;        const messageInput = document.getElementById('messageInput');&#10;&#10;        if (sendBtn) {&#10;            sendBtn.addEventListener('click', () =&gt; this.sendMessage());&#10;        }&#10;&#10;        if (messageInput) {&#10;            messageInput.addEventListener('keydown', (e) =&gt; {&#10;                if (e.key === 'Enter' &amp;&amp; (e.ctrlKey || e.metaKey)) {&#10;                    e.preventDefault();&#10;                    this.sendMessage();&#10;                }&#10;            });&#10;&#10;            messageInput.addEventListener('input', () =&gt; {&#10;                this.updateCharCount();&#10;                this.toggleSendButton();&#10;            });&#10;        }&#10;&#10;        // 附件按钮事件&#10;        const attachBtn = document.querySelector('.input-actions .action-btn:first-child');&#10;        if (attachBtn) {&#10;            attachBtn.addEventListener('click', () =&gt; this.attachFile());&#10;        }&#10;    }&#10;&#10;    setupAutoResize() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        if (messageInput) {&#10;            messageInput.addEventListener('input', function() {&#10;                this.style.height = 'auto';&#10;                this.style.height = Math.min(this.scrollHeight, 120) + 'px';&#10;            });&#10;        }&#10;    }&#10;&#10;    updateCharCount() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        const charCount = document.querySelector('.char-count');&#10;&#10;        if (messageInput &amp;&amp; charCount) {&#10;            const count = messageInput.value.length;&#10;            charCount.textContent = `${count}/2000`;&#10;&#10;            if (count &gt; 2000) {&#10;                charCount.style.color = 'var(--error)';&#10;            } else {&#10;                charCount.style.color = 'var(--gray-400)';&#10;            }&#10;        }&#10;    }&#10;&#10;    toggleSendButton() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        const sendBtn = document.querySelector('.send-btn');&#10;&#10;        if (messageInput &amp;&amp; sendBtn) {&#10;            const hasContent = messageInput.value.trim().length &gt; 0;&#10;            sendBtn.disabled = !hasContent || this.isTyping;&#10;        }&#10;    }&#10;&#10;    async sendMessage() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        const message = messageInput.value.trim();&#10;&#10;        if (!message || this.isTyping) return;&#10;&#10;        // 清空输入框&#10;        messageInput.value = '';&#10;        messageInput.style.height = 'auto';&#10;        this.updateCharCount();&#10;        this.toggleSendButton();&#10;&#10;        // 添加用户消息&#10;        this.addMessage(message, 'user');&#10;&#10;        // 显示AI正在输入&#10;        this.showTypingIndicator();&#10;&#10;        try {&#10;            // 发送消息到后端&#10;            const response = await fetch('/api/chat', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify({&#10;                    message: message,&#10;                    chatId: this.currentChatId&#10;                })&#10;            });&#10;&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                // 移除打字指示器&#10;                this.hideTypingIndicator();&#10;&#10;                // 添加AI回复&#10;                this.addMessage(result.reply, 'assistant');&#10;&#10;                // 更新聊天ID&#10;                if (result.chatId) {&#10;                    this.currentChatId = result.chatId;&#10;                }&#10;            } else {&#10;                this.hideTypingIndicator();&#10;                this.addMessage('抱歉，我现在无法回复。请稍后再试。', 'assistant');&#10;            }&#10;        } catch (error) {&#10;            console.error('发送消息错误:', error);&#10;            this.hideTypingIndicator();&#10;            this.addMessage('网络错误，请检查连接后重试。', 'assistant');&#10;        }&#10;    }&#10;&#10;    addMessage(content, type) {&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        const welcomeMessage = messagesContainer.querySelector('.welcome-message');&#10;&#10;        // 移除欢迎消息&#10;        if (welcomeMessage) {&#10;            welcomeMessage.remove();&#10;        }&#10;&#10;        const messageDiv = document.createElement('div');&#10;        messageDiv.className = `message ${type}`;&#10;&#10;        const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });&#10;&#10;        messageDiv.innerHTML = `&#10;            &lt;div class=&quot;message-avatar&quot;&gt;&#10;                &lt;i class=&quot;fas ${type === 'user' ? 'fa-user' : 'fa-robot'}&quot;&gt;&lt;/i&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;message-content&quot;&gt;&#10;                ${this.formatMessage(content)}&#10;                &lt;div class=&quot;message-time&quot;&gt;${time}&lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        messagesContainer.appendChild(messageDiv);&#10;        this.scrollToBottom();&#10;    }&#10;&#10;    formatMessage(content) {&#10;        // 简单的消息格式化，可以根据需要扩展&#10;        return content&#10;            .replace(/\n/g, '&lt;br&gt;')&#10;            .replace(/`([^`]+)`/g, '&lt;code&gt;$1&lt;/code&gt;');&#10;    }&#10;&#10;    showTypingIndicator() {&#10;        this.isTyping = true;&#10;        this.toggleSendButton();&#10;&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        const typingDiv = document.createElement('div');&#10;        typingDiv.className = 'message assistant';&#10;        typingDiv.id = 'typing-indicator';&#10;&#10;        typingDiv.innerHTML = `&#10;            &lt;div class=&quot;message-avatar&quot;&gt;&#10;                &lt;i class=&quot;fas fa-robot&quot;&gt;&lt;/i&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;typing-indicator&quot;&gt;&#10;                &lt;span&gt;AI正在思考&lt;/span&gt;&#10;                &lt;div class=&quot;typing-dots&quot;&gt;&#10;                    &lt;div class=&quot;typing-dot&quot;&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;typing-dot&quot;&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;typing-dot&quot;&gt;&lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        messagesContainer.appendChild(typingDiv);&#10;        this.scrollToBottom();&#10;    }&#10;&#10;    hideTypingIndicator() {&#10;        this.isTyping = false;&#10;        this.toggleSendButton();&#10;&#10;        const typingIndicator = document.getElementById('typing-indicator');&#10;        if (typingIndicator) {&#10;            typingIndicator.remove();&#10;        }&#10;    }&#10;&#10;    scrollToBottom() {&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        messagesContainer.scrollTop = messagesContainer.scrollHeight;&#10;    }&#10;&#10;    attachFile() {&#10;        // 创建文件输入元素&#10;        const fileInput = document.createElement('input');&#10;        fileInput.type = 'file';&#10;        fileInput.accept = 'image/*,.pdf,.doc,.docx,.txt';&#10;        fileInput.style.display = 'none';&#10;&#10;        fileInput.addEventListener('change', (e) =&gt; {&#10;            const file = e.target.files[0];&#10;            if (file) {&#10;                this.handleFileUpload(file);&#10;            }&#10;        });&#10;&#10;        document.body.appendChild(fileInput);&#10;        fileInput.click();&#10;        document.body.removeChild(fileInput);&#10;    }&#10;&#10;    async handleFileUpload(file) {&#10;        // 这里可以实现文件上传逻辑&#10;        console.log('上传文件:', file.name);&#10;&#10;        // 显示文件消息&#10;        this.addMessage(` 上传了文件: ${file.name}`, 'user');&#10;&#10;        // 模拟AI回复&#10;        setTimeout(() =&gt; {&#10;            this.addMessage('我已收到您的文件，但目前还不支持文件处理功能。', 'assistant');&#10;        }, 1000);&#10;    }&#10;}&#10;&#10;// 全局函数&#10;function newChat() {&#10;    const chatManager = window.chatManager;&#10;    if (chatManager) {&#10;        chatManager.currentChatId = null;&#10;&#10;        // 清空消息区域&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        messagesContainer.innerHTML = `&#10;            &lt;div class=&quot;welcome-message&quot;&gt;&#10;                &lt;div class=&quot;welcome-icon&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-robot&quot;&gt;&lt;/i&gt;&#10;                &lt;/div&gt;&#10;                &lt;h3&gt;开始新对话&lt;/h3&gt;&#10;                &lt;p&gt;我是您的AI助手，有什么可以帮助您的吗？&lt;/p&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;    }&#10;}&#10;&#10;function clearChat() {&#10;    if (confirm('确定要清除当前对话吗？')) {&#10;        newChat();&#10;    }&#10;}&#10;&#10;function exportChat() {&#10;    const messages = document.querySelectorAll('.message');&#10;    let chatContent = '# AI聊天记录\n\n';&#10;&#10;    messages.forEach(message =&gt; {&#10;        const type = message.classList.contains('user') ? '用户' : 'AI助手';&#10;        const content = message.querySelector('.message-content').textContent.trim();&#10;        const time = message.querySelector('.message-time')?.textContent || '';&#10;&#10;        chatContent += `**${type}** (${time})\n${content}\n\n`;&#10;    });&#10;&#10;    // 创建下载链接&#10;    const blob = new Blob([chatContent], { type: 'text/markdown' });&#10;    const url = URL.createObjectURL(blob);&#10;    const a = document.createElement('a');&#10;    a.href = url;&#10;    a.download = `chat-${new Date().toISOString().split('T')[0]}.md`;&#10;    document.body.appendChild(a);&#10;    a.click();&#10;    document.body.removeChild(a);&#10;    URL.revokeObjectURL(url);&#10;}&#10;&#10;function logout() {&#10;    if (confirm('确定要退出登录吗？')) {&#10;        // 清除用户会话&#10;        sessionStorage.removeItem('userInfo');&#10;        localStorage.removeItem('userInfo');&#10;&#10;        // 跳转到登录页面&#10;        window.location.href = '/login';&#10;    }&#10;}&#10;&#10;function sendMessage() {&#10;    const chatManager = window.chatManager;&#10;    if (chatManager) {&#10;        chatManager.sendMessage();&#10;    }&#10;}&#10;&#10;function attachFile() {&#10;    const chatManager = window.chatManager;&#10;    if (chatManager) {&#10;        chatManager.attachFile();&#10;    }&#10;}&#10;&#10;// 页面加载完成后初始化&#10;document.addEventListener('DOMContentLoaded', () =&gt; {&#10;    window.chatManager = new ChatManager();&#10;});&#10;" />
              <option name="updatedContent" value="// AI聊天室高级功能JavaScript&#10;class AdvancedChatManager {&#10;    constructor() {&#10;        this.currentChatId = null;&#10;        this.currentUser = null;&#10;        this.chatHistory = [];&#10;        this.isTyping = false;&#10;        this.settings = this.loadSettings();&#10;        this.profile = this.loadProfile();&#10;        this.init();&#10;    }&#10;&#10;    init() {&#10;        this.checkAuth();&#10;        this.bindEvents();&#10;        this.loadUserInfo();&#10;        this.setupAutoResize();&#10;        this.loadChatHistory();&#10;        this.applySettings();&#10;    }&#10;&#10;    checkAuth() {&#10;        const userInfo = this.getUserSession();&#10;        if (!userInfo) {&#10;            window.location.href = '/login';&#10;            return;&#10;        }&#10;        this.currentUser = userInfo;&#10;    }&#10;&#10;    getUserSession() {&#10;        const sessionData = sessionStorage.getItem('userInfo') || localStorage.getItem('userInfo');&#10;        return sessionData ? JSON.parse(sessionData) : null;&#10;    }&#10;&#10;    loadUserInfo() {&#10;        if (this.currentUser) {&#10;            document.getElementById('displayUsername').textContent = this.profile.nickname || this.currentUser.username;&#10;            &#10;            // 加载用户头像&#10;            const avatarImg = document.getElementById('userAvatarImg');&#10;            if (this.profile.avatar) {&#10;                avatarImg.src = this.profile.avatar;&#10;            }&#10;        }&#10;    }&#10;&#10;    bindEvents() {&#10;        // 发送��息事件&#10;        const sendBtn = document.querySelector('.send-btn');&#10;        const messageInput = document.getElementById('messageInput');&#10;        &#10;        if (sendBtn) {&#10;            sendBtn.addEventListener('click', () =&gt; this.sendMessage());&#10;        }&#10;&#10;        if (messageInput) {&#10;            // 根据设置确定快捷键&#10;            const shortcut = this.settings.shortcutKey || 'ctrl+enter';&#10;            &#10;            messageInput.addEventListener('keydown', (e) =&gt; {&#10;                if (shortcut === 'enter' &amp;&amp; e.key === 'Enter' &amp;&amp; !e.shiftKey) {&#10;                    e.preventDefault();&#10;                    this.sendMessage();&#10;                } else if (shortcut === 'ctrl+enter' &amp;&amp; e.key === 'Enter' &amp;&amp; (e.ctrlKey || e.metaKey)) {&#10;                    e.preventDefault();&#10;                    this.sendMessage();&#10;                }&#10;            });&#10;&#10;            messageInput.addEventListener('input', () =&gt; {&#10;                this.updateCharCount();&#10;                this.toggleSendButton();&#10;            });&#10;        }&#10;&#10;        // 头像上传事件&#10;        const avatarInput = document.getElementById('avatarInput');&#10;        if (avatarInput) {&#10;            avatarInput.addEventListener('change', (e) =&gt; this.handleAvatarChange(e));&#10;        }&#10;&#10;        // 搜索功能&#10;        const searchInput = document.getElementById('searchInput');&#10;        if (searchInput) {&#10;            searchInput.addEventListener('input', (e) =&gt; this.searchChats(e.target.value));&#10;        }&#10;    }&#10;&#10;    setupAutoResize() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        if (messageInput) {&#10;            messageInput.addEventListener('input', function() {&#10;                this.style.height = 'auto';&#10;                this.style.height = Math.min(this.scrollHeight, 120) + 'px';&#10;            });&#10;        }&#10;    }&#10;&#10;    updateCharCount() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        const charCount = document.querySelector('.char-count');&#10;        &#10;        if (messageInput &amp;&amp; charCount) {&#10;            const count = messageInput.value.length;&#10;            charCount.textContent = `${count}/2000`;&#10;            &#10;            charCount.className = 'char-count';&#10;            if (count &gt; 1800) {&#10;                charCount.classList.add('warning');&#10;            }&#10;            if (count &gt; 2000) {&#10;                charCount.classList.add('error');&#10;            }&#10;        }&#10;    }&#10;&#10;    toggleSendButton() {&#10;        const messageInput = document.getElementById('messageInput');&#10;        const sendBtn = document.querySelector('.send-btn');&#10;        &#10;        if (messageInput &amp;&amp; sendBtn) {&#10;            const hasContent = messageInput.value.trim().length &gt; 0;&#10;            sendBtn.disabled = !hasContent || this.isTyping;&#10;        }&#10;    }&#10;&#10;    async sendMessage(quickMessage = null) {&#10;        const messageInput = document.getElementById('messageInput');&#10;        const message = quickMessage || messageInput.value.trim();&#10;        &#10;        if (!message || this.isTyping) return;&#10;&#10;        // 清空输入框&#10;        if (!quickMessage) {&#10;            messageInput.value = '';&#10;            messageInput.style.height = 'auto';&#10;            this.updateCharCount();&#10;            this.toggleSendButton();&#10;        }&#10;&#10;        // 隐藏欢迎区域&#10;        this.hideWelcomeSection();&#10;&#10;        // 添加用户消息&#10;        this.addMessage(message, 'user');&#10;&#10;        // 显示AI正在输入&#10;        this.showTypingIndicator();&#10;&#10;        try {&#10;            const response = await fetch('/api/chat', {&#10;                method: 'POST',&#10;                headers: {&#10;                    'Content-Type': 'application/json',&#10;                },&#10;                body: JSON.stringify({&#10;                    message: message,&#10;                    chatId: this.currentChatId,&#10;                    username: this.currentUser.username&#10;                })&#10;            });&#10;&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                this.hideTypingIndicator();&#10;                this.addMessage(result.reply, 'assistant');&#10;                &#10;                if (result.chatId) {&#10;                    this.currentChatId = result.chatId;&#10;                    this.updateChatTitle();&#10;                    this.loadChatHistory(); // 刷新聊天历史&#10;                }&#10;            } else {&#10;                this.hideTypingIndicator();&#10;                this.addMessage('抱歉，我现在无法回复。请稍后再试。', 'assistant');&#10;            }&#10;        } catch (error) {&#10;            console.error('发送消息错误:', error);&#10;            this.hideTypingIndicator();&#10;            this.addMessage('网络错误，请检查连接后重试。', 'assistant');&#10;        }&#10;    }&#10;&#10;    addMessage(content, type) {&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        &#10;        const messageDiv = document.createElement('div');&#10;        messageDiv.className = `message ${type}`;&#10;&#10;        const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });&#10;        const showTime = this.settings.showTime !== false;&#10;&#10;        messageDiv.innerHTML = `&#10;            &lt;div class=&quot;message-avatar&quot;&gt;&#10;                &lt;i class=&quot;fas ${type === 'user' ? 'fa-user' : 'fa-robot'}&quot;&gt;&lt;/i&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;message-content&quot;&gt;&#10;                &lt;div class=&quot;message-bubble&quot;&gt;&#10;                    ${this.formatMessage(content)}&#10;                &lt;/div&gt;&#10;                ${showTime ? `&lt;div class=&quot;message-time&quot;&gt;${time}&lt;/div&gt;` : ''}&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        messagesContainer.appendChild(messageDiv);&#10;        this.scrollToBottom();&#10;        this.updateChatInfo();&#10;    }&#10;&#10;    formatMessage(content) {&#10;        return content&#10;            .replace(/\n/g, '&lt;br&gt;')&#10;            .replace(/`([^`]+)`/g, '&lt;code&gt;$1&lt;/code&gt;')&#10;            .replace(/\*\*(.*?)\*\*/g, '&lt;strong&gt;$1&lt;/strong&gt;')&#10;            .replace(/\*(.*?)\*/g, '&lt;em&gt;$1&lt;/em&gt;');&#10;    }&#10;&#10;    hideWelcomeSection() {&#10;        const welcomeSection = document.querySelector('.welcome-section');&#10;        if (welcomeSection) {&#10;            welcomeSection.style.display = 'none';&#10;        }&#10;    }&#10;&#10;    showTypingIndicator() {&#10;        this.isTyping = true;&#10;        this.toggleSendButton();&#10;&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        const typingDiv = document.createElement('div');&#10;        typingDiv.className = 'message assistant';&#10;        typingDiv.id = 'typing-indicator';&#10;&#10;        typingDiv.innerHTML = `&#10;            &lt;div class=&quot;message-avatar&quot;&gt;&#10;                &lt;i class=&quot;fas fa-robot&quot;&gt;&lt;/i&gt;&#10;            &lt;/div&gt;&#10;            &lt;div class=&quot;typing-indicator&quot;&gt;&#10;                &lt;span&gt;AI正在思考&lt;/span&gt;&#10;                &lt;div class=&quot;typing-dots&quot;&gt;&#10;                    &lt;div class=&quot;typing-dot&quot;&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;typing-dot&quot;&gt;&lt;/div&gt;&#10;                    &lt;div class=&quot;typing-dot&quot;&gt;&lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;&#10;        messagesContainer.appendChild(typingDiv);&#10;        this.scrollToBottom();&#10;    }&#10;&#10;    hideTypingIndicator() {&#10;        this.isTyping = false;&#10;        this.toggleSendButton();&#10;&#10;        const typingIndicator = document.getElementById('typing-indicator');&#10;        if (typingIndicator) {&#10;            typingIndicator.remove();&#10;        }&#10;    }&#10;&#10;    scrollToBottom() {&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        messagesContainer.scrollTop = messagesContainer.scrollHeight;&#10;    }&#10;&#10;    async loadChatHistory() {&#10;        if (!this.currentUser) return;&#10;&#10;        try {&#10;            const response = await fetch(`/api/chats/${this.currentUser.username}`);&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                this.renderChatHistory(result.chats);&#10;            }&#10;        } catch (error) {&#10;            console.error('加载聊天历史失败:', error);&#10;        }&#10;    }&#10;&#10;    renderChatHistory(chats) {&#10;        const historyList = document.getElementById('chatHistoryList');&#10;        &#10;        if (chats.length === 0) {&#10;            historyList.innerHTML = `&#10;                &lt;div class=&quot;history-placeholder&quot;&gt;&#10;                    &lt;i class=&quot;fas fa-comments&quot;&gt;&lt;/i&gt;&#10;                    &lt;p&gt;暂无对话记录&lt;/p&gt;&#10;                    &lt;span&gt;开始您的第一次AI对话&lt;/span&gt;&#10;                &lt;/div&gt;&#10;            `;&#10;            return;&#10;        }&#10;&#10;        historyList.innerHTML = '';&#10;        &#10;        chats.forEach(chat =&gt; {&#10;            const chatItem = document.createElement('div');&#10;            chatItem.className = 'history-item';&#10;            if (chat.id === this.currentChatId) {&#10;                chatItem.classList.add('active');&#10;            }&#10;&#10;            const lastActiveTime = new Date(chat.lastActiveTime).toLocaleDateString();&#10;            &#10;            chatItem.innerHTML = `&#10;                &lt;div class=&quot;title&quot;&gt;${chat.title}&lt;/div&gt;&#10;                &lt;div class=&quot;preview&quot;&gt;共 ${chat.messageCount} 条消息&lt;/div&gt;&#10;                &lt;div class=&quot;meta&quot;&gt;&#10;                    &lt;span&gt;${lastActiveTime}&lt;/span&gt;&#10;                    &lt;button class=&quot;delete-chat-btn&quot; onclick=&quot;deleteChatHistory('${chat.id}')&quot; title=&quot;删除对话&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-trash&quot;&gt;&lt;/i&gt;&#10;                    &lt;/button&gt;&#10;                &lt;/div&gt;&#10;            `;&#10;&#10;            chatItem.addEventListener('click', (e) =&gt; {&#10;                if (!e.target.closest('.delete-chat-btn')) {&#10;                    this.loadChat(chat.id);&#10;                }&#10;            });&#10;&#10;            historyList.appendChild(chatItem);&#10;        });&#10;    }&#10;&#10;    async loadChat(chatId) {&#10;        try {&#10;            const response = await fetch(`/api/chat/${chatId}`);&#10;            const result = await response.json();&#10;&#10;            if (result.success) {&#10;                this.currentChatId = chatId;&#10;                this.renderChatMessages(result.messages);&#10;                this.updateChatTitle(result.title);&#10;                this.updateActiveChat();&#10;            }&#10;        } catch (error) {&#10;            console.error('加载对话失败:', error);&#10;        }&#10;    }&#10;&#10;    renderChatMessages(messages) {&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        messagesContainer.innerHTML = '';&#10;&#10;        messages.forEach(msg =&gt; {&#10;            this.addMessage(msg.content, msg.role);&#10;        });&#10;    }&#10;&#10;    updateChatTitle(title = '新对话') {&#10;        document.getElementById('chatTitle').textContent = title;&#10;        document.getElementById('currentChatTitle').textContent = title;&#10;    }&#10;&#10;    updateActiveChat() {&#10;        document.querySelectorAll('.history-item').forEach(item =&gt; {&#10;            item.classList.remove('active');&#10;        });&#10;        &#10;        document.querySelectorAll('.history-item').forEach(item =&gt; {&#10;            const titleElement = item.querySelector('.title');&#10;            if (titleElement &amp;&amp; titleElement.textContent === document.getElementById('chatTitle').textContent) {&#10;                item.classList.add('active');&#10;            }&#10;        });&#10;    }&#10;&#10;    updateChatInfo() {&#10;        const messages = document.querySelectorAll('.message');&#10;        document.getElementById('messageCount').textContent = messages.length.toString();&#10;        &#10;        if (this.currentChatId &amp;&amp; messages.length === 1) {&#10;            document.getElementById('chatCreateTime').textContent = new Date().toLocaleString();&#10;        }&#10;    }&#10;&#10;    searchChats(query) {&#10;        const historyItems = document.querySelectorAll('.history-item');&#10;        &#10;        historyItems.forEach(item =&gt; {&#10;            const title = item.querySelector('.title').textContent.toLowerCase();&#10;            const isMatch = title.includes(query.toLowerCase());&#10;            item.style.display = isMatch ? 'block' : 'none';&#10;        });&#10;    }&#10;&#10;    // 设置相关方法&#10;    loadSettings() {&#10;        const saved = localStorage.getItem('chatSettings');&#10;        return saved ? JSON.parse(saved) : {&#10;            autoSave: true,&#10;            shortcutKey: 'ctrl+enter',&#10;            showTime: true,&#10;            themeMode: 'dark',&#10;            fontSize: 'medium',&#10;            compactMode: false,&#10;            aiSpeed: 'balanced',&#10;            contextLength: 'medium',&#10;            streamOutput: true&#10;        };&#10;    }&#10;&#10;    saveSettings() {&#10;        localStorage.setItem('chatSettings', JSON.stringify(this.settings));&#10;        this.applySettings();&#10;    }&#10;&#10;    applySettings() {&#10;        // 应用字体大小设置&#10;        const fontSize = this.settings.fontSize || 'medium';&#10;        document.body.className = `font-${fontSize}`;&#10;        &#10;        // 应用紧凑模式&#10;        if (this.settings.compactMode) {&#10;            document.body.classList.add('compact-mode');&#10;        }&#10;    }&#10;&#10;    // 个人资料相关方法&#10;    loadProfile() {&#10;        const saved = localStorage.getItem('userProfile');&#10;        return saved ? JSON.parse(saved) : {&#10;            nickname: '',&#10;            bio: '',&#10;            avatar: null&#10;        };&#10;    }&#10;&#10;    saveProfile() {&#10;        localStorage.setItem('userProfile', JSON.stringify(this.profile));&#10;        this.loadUserInfo();&#10;    }&#10;&#10;    handleAvatarChange(event) {&#10;        const file = event.target.files[0];&#10;        if (file) {&#10;            const reader = new FileReader();&#10;            reader.onload = (e) =&gt; {&#10;                const avatarPreview = document.getElementById('avatarPreview');&#10;                const userAvatarImg = document.getElementById('userAvatarImg');&#10;                &#10;                avatarPreview.src = e.target.result;&#10;                userAvatarImg.src = e.target.result;&#10;                &#10;                this.profile.avatar = e.target.result;&#10;            };&#10;            reader.readAsDataURL(file);&#10;        }&#10;    }&#10;}&#10;&#10;// 全局函数&#10;function newChat() {&#10;    const chatManager = window.chatManager;&#10;    if (chatManager) {&#10;        chatManager.currentChatId = null;&#10;        chatManager.updateChatTitle('AI助手');&#10;        &#10;        // 清空消息区域并显示欢迎页面&#10;        const messagesContainer = document.getElementById('chatMessages');&#10;        messagesContainer.innerHTML = `&#10;            &lt;div class=&quot;welcome-section&quot;&gt;&#10;                &lt;div class=&quot;welcome-avatar&quot;&gt;&#10;                    &lt;div class=&quot;ai-avatar&quot;&gt;&#10;                        &lt;i class=&quot;fas fa-robot&quot;&gt;&lt;/i&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;                &lt;div class=&quot;welcome-content&quot;&gt;&#10;                    &lt;h3&gt;欢迎使用AI聊天室&lt;/h3&gt;&#10;                    &lt;p&gt;我是您的AI智能助手，基于先进的大语言模型&lt;/p&gt;&#10;                    &lt;div class=&quot;quick-actions&quot;&gt;&#10;                        &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('你好，请介绍一下自己')&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-hand-wave&quot;&gt;&lt;/i&gt;&#10;                            &lt;span&gt;打个招呼&lt;/span&gt;&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('今天天气怎么样？')&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-cloud-sun&quot;&gt;&lt;/i&gt;&#10;                            &lt;span&gt;天气查询&lt;/span&gt;&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('帮我写一首诗')&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-feather&quot;&gt;&lt;/i&gt;&#10;                            &lt;span&gt;创意写作&lt;/span&gt;&#10;                        &lt;/button&gt;&#10;                        &lt;button class=&quot;quick-btn&quot; onclick=&quot;sendQuickMessage('解释一下人工智能')&quot;&gt;&#10;                            &lt;i class=&quot;fas fa-lightbulb&quot;&gt;&lt;/i&gt;&#10;                            &lt;span&gt;知识问答&lt;/span&gt;&#10;                        &lt;/button&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        `;&#10;        &#10;        chatManager.updateActiveChat();&#10;    }&#10;}&#10;&#10;function sendQuickMessage(message) {&#10;    const chatManager = window.chatManager;&#10;    if (chatManager) {&#10;        chatManager.sendMessage(message);&#10;    }&#10;}&#10;&#10;function clearCurrentChat() {&#10;    if (confirm('确定要清除当前对话吗？')) {&#10;        newChat();&#10;    }&#10;}&#10;&#10;async function deleteChatHistory(chatId) {&#10;    if (confirm('确定要删除这个对话吗？')) {&#10;        try {&#10;            const chatManager = window.chatManager;&#10;            const response = await fetch(`/api/chat/${chatId}?username=${chatManager.currentUser.username}`, {&#10;                method: 'DELETE'&#10;            });&#10;            &#10;            if (response.ok) {&#10;                chatManager.loadChatHistory();&#10;                if (chatManager.currentChatId === chatId) {&#10;                    newChat();&#10;                }&#10;            }&#10;        } catch (error) {&#10;            console.error('删除对话失败:', error);&#10;        }&#10;    }&#10;}&#10;&#10;function exportChat() {&#10;    const messages = document.querySelectorAll('.message');&#10;    let chatContent = '# AI聊天记录\n\n';&#10;    &#10;    messages.forEach(message =&gt; {&#10;        const type = message.classList.contains('user') ? '用户' : 'AI助手';&#10;        const bubble = message.querySelector('.message-bubble');&#10;        const timeElement = message.querySelector('.message-time');&#10;        &#10;        if (bubble) {&#10;            const content = bubble.textContent.trim();&#10;            const time = timeElement ? timeElement.textContent : '';&#10;            chatContent += `**${type}** ${time ? `(${time})` : ''}\n${content}\n\n`;&#10;        }&#10;    });&#10;&#10;    const blob = new Blob([chatContent], { type: 'text/markdown' });&#10;    const url = URL.createObjectURL(blob);&#10;    const a = document.createElement('a');&#10;    a.href = url;&#10;    a.download = `chat-${new Date().toISOString().split('T')[0]}.md`;&#10;    document.body.appendChild(a);&#10;    a.click();&#10;    document.body.removeChild(a);&#10;    URL.revokeObjectURL(url);&#10;}&#10;&#10;function logout() {&#10;    if (confirm('确定要退出登录吗？')) {&#10;        sessionStorage.removeItem('userInfo');&#10;        localStorage.removeItem('userInfo');&#10;        window.location.href = '/login';&#10;    }&#10;}&#10;&#10;// UI 控制函数&#10;function toggleSidebar() {&#10;    const sidebar = document.getElementById('sidebar');&#10;    sidebar.classList.toggle('open');&#10;}&#10;&#10;function toggleSearch() {&#10;    const searchContainer = document.getElementById('searchContainer');&#10;    searchContainer.classList.toggle('show');&#10;    &#10;    if (searchContainer.classList.contains('show')) {&#10;        document.getElementById('searchInput').focus();&#10;    }&#10;}&#10;&#10;function toggleChatInfo() {&#10;    const panel = document.getElementById('chatInfoPanel');&#10;    panel.classList.toggle('open');&#10;}&#10;&#10;function toggleVoiceInput() {&#10;    const voiceBtn = document.querySelector('.voice-btn');&#10;    const isRecording = voiceBtn.classList.contains('recording');&#10;    &#10;    if (isRecording) {&#10;        voiceBtn.classList.remove('recording');&#10;        // 停止录音逻辑&#10;    } else {&#10;        voiceBtn.classList.add('recording');&#10;        // 开始录音逻辑&#10;    }&#10;}&#10;&#10;function attachFile() {&#10;    const fileInput = document.createElement('input');&#10;    fileInput.type = 'file';&#10;    fileInput.accept = 'image/*,.pdf,.doc,.docx,.txt';&#10;    fileInput.style.display = 'none';&#10;&#10;    fileInput.addEventListener('change', (e) =&gt; {&#10;        const file = e.target.files[0];&#10;        if (file) {&#10;            console.log('选择文件:', file.name);&#10;            // 这里可以实现文件上传逻辑&#10;        }&#10;    });&#10;&#10;    document.body.appendChild(fileInput);&#10;    fileInput.click();&#10;    document.body.removeChild(fileInput);&#10;}&#10;&#10;function insertEmoji() {&#10;    const messageInput = document.getElementById('messageInput');&#10;    const emojis = ['', '', '', '', '❤️', '', '', ''];&#10;    const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];&#10;    &#10;    messageInput.value += randomEmoji;&#10;    messageInput.focus();&#10;    &#10;    window.chatManager.updateCharCount();&#10;    window.chatManager.toggleSendButton();&#10;}&#10;&#10;// 模态框控制&#10;function openProfileModal() {&#10;    const modal = document.getElementById('profileModalOverlay');&#10;    const chatManager = window.chatManager;&#10;    &#10;    // 填充当前信息&#10;    document.getElementById('profileUsername').value = chatManager.currentUser.username;&#10;    document.getElementById('profileEmail').value = chatManager.currentUser.email || '';&#10;    document.getElementById('profileNickname').value = chatManager.profile.nickname || '';&#10;    document.getElementById('profileBio').value = chatManager.profile.bio || '';&#10;    &#10;    const avatarPreview = document.getElementById('avatarPreview');&#10;    avatarPreview.src = chatManager.profile.avatar || document.getElementById('userAvatarImg').src;&#10;    &#10;    modal.classList.add('show');&#10;}&#10;&#10;function closeProfileModal() {&#10;    document.getElementById('profileModalOverlay').classList.remove('show');&#10;}&#10;&#10;function changeAvatar() {&#10;    document.getElementById('avatarInput').click();&#10;}&#10;&#10;function saveProfile() {&#10;    const chatManager = window.chatManager;&#10;    &#10;    chatManager.profile.nickname = document.getElementById('profileNickname').value;&#10;    chatManager.profile.bio = document.getElementById('profileBio').value;&#10;    &#10;    chatManager.saveProfile();&#10;    closeProfileModal();&#10;}&#10;&#10;function openSettingsModal() {&#10;    const modal = document.getElementById('settingsModalOverlay');&#10;    const chatManager = window.chatManager;&#10;    &#10;    // 填充当前设置&#10;    document.getElementById('autoSave').checked = chatManager.settings.autoSave;&#10;    document.getElementById('shortcutKey').value = chatManager.settings.shortcutKey;&#10;    document.getElementById('showTime').checked = chatManager.settings.showTime;&#10;    document.getElementById('themeMode').value = chatManager.settings.themeMode;&#10;    document.getElementById('fontSize').value = chatManager.settings.fontSize;&#10;    document.getElementById('compactMode').checked = chatManager.settings.compactMode;&#10;    document.getElementById('aiSpeed').value = chatManager.settings.aiSpeed;&#10;    document.getElementById('contextLength').value = chatManager.settings.contextLength;&#10;    document.getElementById('streamOutput').checked = chatManager.settings.streamOutput;&#10;    &#10;    modal.classList.add('show');&#10;}&#10;&#10;function closeSettingsModal() {&#10;    document.getElementById('settingsModalOverlay').classList.remove('show');&#10;}&#10;&#10;function switchTab(tabName) {&#10;    // 切换标签按钮状态&#10;    document.querySelectorAll('.tab-btn').forEach(btn =&gt; btn.classList.remove('active'));&#10;    document.querySelector(`[onclick=&quot;switchTab('${tabName}')&quot;]`).classList.add('active');&#10;    &#10;    // 切换内容&#10;    document.querySelectorAll('.tab-content').forEach(content =&gt; content.classList.remove('active'));&#10;    document.getElementById(`${tabName}Tab`).classList.add('active');&#10;}&#10;&#10;function saveSettings() {&#10;    const chatManager = window.chatManager;&#10;    &#10;    chatManager.settings.autoSave = document.getElementById('autoSave').checked;&#10;    chatManager.settings.shortcutKey = document.getElementById('shortcutKey').value;&#10;    chatManager.settings.showTime = document.getElementById('showTime').checked;&#10;    chatManager.settings.themeMode = document.getElementById('themeMode').value;&#10;    chatManager.settings.fontSize = document.getElementById('fontSize').value;&#10;    chatManager.settings.compactMode = document.getElementById('compactMode').checked;&#10;    chatManager.settings.aiSpeed = document.getElementById('aiSpeed').value;&#10;    chatManager.settings.contextLength = document.getElementById('contextLength').value;&#10;    chatManager.settings.streamOutput = document.getElementById('streamOutput').checked;&#10;    &#10;    chatManager.saveSettings();&#10;    closeSettingsModal();&#10;}&#10;&#10;function sendMessage() {&#10;    const chatManager = window.chatManager;&#10;    if (chatManager) {&#10;        chatManager.sendMessage();&#10;    }&#10;}&#10;&#10;// 页面加载完成后初始化&#10;document.addEventListener('DOMContentLoaded', () =&gt; {&#10;    window.chatManager = new AdvancedChatManager();&#10;});" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>